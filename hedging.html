<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72+: Hedging</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <!--BEGIN SS360 SEARCH-->
  <td>
	<div id="site-search-360" align="right" style="padding-left: 1em;">
		<input id="searchBox" type="search" placeholder="Search..." />
		<input id="ss360SearchButton" type="submit" />
	</div>
  </td>
  <!--END SS360 SEARCH-->
  <div id="contact-us" align="right">
	<td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  </div>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('hedging.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Hedging </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Hedging orders are similar to Bracket Orders. With hedging order, a child order is submitted only on execution of the parent. Orders can be hedged by an attached forex trade, Beta hedge, or Pair Trade, just as in TWS:</p>
<p><a href="https://www.interactivebrokers.com/en/software/tws/attachedordertop.htm" target="_blank" class="linkexternal">Hedging Orders in TWS</a></p>
<p>For an example of a forex hedge, when buying a contract on a currency other than your base, you can attach an FX order to convert base currency to the currency of the contract to cover the cost of the trade thanks to the TWS API's <a class="el" href="order_submission.html#order_attach">Attaching Orders</a> mechanism.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> Order MarketFHedge(<span class="keywordtype">int</span> parentOrderId, <span class="keywordtype">string</span> action)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">//FX Hedge orders can only have a quantity of 0</span></div>
<div class="line">            Order order = MarketOrder(action, 0);</div>
<div class="line">            order.ParentId = parentOrderId;</div>
<div class="line">            order.HedgeType = <span class="stringliteral">&quot;F&quot;</span>;</div>
<div class="line">            <span class="keywordflow">return</span> order;</div>
<div class="line">        }</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            <span class="comment">//Parent order on a contract which currency differs from your base currency</span></div>
<div class="line">            Order parent = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 100, 10);</div>
<div class="line">            parent.OrderId = nextOrderId++;</div>
<div class="line">            <span class="comment">//Hedge on the currency conversion</span></div>
<div class="line">            Order hedge = OrderSamples.MarketFHedge(parent.OrderId, <span class="stringliteral">&quot;BUY&quot;</span>);</div>
<div class="line">            <span class="comment">//Place the parent first...</span></div>
<div class="line">            client.placeOrder(parent.OrderId, ContractSamples.EuropeanStock(), parent);</div>
<div class="line">            <span class="comment">//Then the hedge order</span></div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.EurGbpFx(), hedge);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Order MarketFHedge(<span class="keywordtype">int</span> parentOrderId, String action) {</div>
<div class="line">        <span class="comment">//FX Hedge orders can only have a quantity of 0</span></div>
<div class="line">        Order order = MarketOrder(action, 0);</div>
<div class="line">        order.parentId(parentOrderId);</div>
<div class="line">        order.hedgeType(<span class="stringliteral">&quot;F&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> order;</div>
<div class="line">    }</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="comment">//Parent order on a contract which currency differs from your base currency</span></div>
<div class="line">        Order parent = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 100, 10);</div>
<div class="line">        parent.orderId(nextOrderId++);</div>
<div class="line">        <span class="comment">//Hedge on the currency conversion</span></div>
<div class="line">        Order hedge = OrderSamples.MarketFHedge(parent.orderId(), <span class="stringliteral">&quot;BUY&quot;</span>);</div>
<div class="line">        <span class="comment">//Place the parent first...</span></div>
<div class="line">        client.placeOrder(parent.orderId(), ContractSamples.EuropeanStock(), parent);</div>
<div class="line">        <span class="comment">//Then the hedge order</span></div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.EurGbpFx(), hedge);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Public Shared Function MarketFHedge(parentOrderId As Integer, action As String) As Order</div>
<div class="line"></div>
<div class="line">            <span class="stringliteral">&#39;FX Hedge orders can only have a quantity of 0</span></div>
<div class="line"><span class="stringliteral">            Dim Order As Order = MarketOrder(action, 0)</span></div>
<div class="line"><span class="stringliteral">            Order.ParentId = parentOrderId</span></div>
<div class="line"><span class="stringliteral">            Order.HedgeType = &quot;F&quot;</span></div>
<div class="line"><span class="stringliteral">            Return Order</span></div>
<div class="line"><span class="stringliteral">        End Function</span></div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="stringliteral">&#39;Parent order on a contract which currency differs from your base currency</span></div>
<div class="line"><span class="stringliteral">        Dim parent As Order = OrderSamples.LimitOrder(&quot;BUY&quot;, 100, 10)</span></div>
<div class="line"><span class="stringliteral">        parent.OrderId = increment(nextOrderId)</span></div>
<div class="line"><span class="stringliteral">        &#39;</span>Hedge on the currency conversion</div>
<div class="line">        Dim hedge As Order = OrderSamples.MarketFHedge(parent.OrderId, <span class="stringliteral">&quot;BUY&quot;</span>)</div>
<div class="line">        <span class="stringliteral">&#39;Place the parent first...</span></div>
<div class="line"><span class="stringliteral">        client.placeOrder(parent.OrderId, ContractSamples.EuropeanStock(), parent)</span></div>
<div class="line"><span class="stringliteral">        &#39;</span>Then the hedge order</div>
<div class="line">        client.placeOrder(increment(increment(nextOrderId)), ContractSamples.EurGbpFx(), hedge)</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">Order OrderSamples::MarketFHedge(<span class="keywordtype">int</span> parentOrderId, std::string action){</div>
<div class="line">    <span class="comment">//FX Hedge orders can only have a quantity of 0</span></div>
<div class="line">    Order order = MarketOrder(action, 0);</div>
<div class="line">    order.parentId = parentOrderId;</div>
<div class="line">    order.hedgeType = <span class="stringliteral">&quot;F&quot;</span>;</div>
<div class="line">    <span class="keywordflow">return</span> order;</div>
<div class="line">}</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="comment">//Parent order on a contract which currency differs from your base currency</span></div>
<div class="line">    Order parent = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 100, 10);</div>
<div class="line">    parent.orderId = m_orderId++;</div>
<div class="line">    <span class="comment">//Hedge on the currency conversion</span></div>
<div class="line">    Order hedge = OrderSamples::MarketFHedge(parent.orderId, <span class="stringliteral">&quot;BUY&quot;</span>);</div>
<div class="line">    <span class="comment">//Place the parent first...</span></div>
<div class="line">    m_pClient-&gt;placeOrder(parent.orderId, ContractSamples::EuropeanStock(), parent);</div>
<div class="line">    <span class="comment">//Then the hedge order</span></div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::EurGbpFx(), hedge);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>MarketFHedge(parentOrderId:int, action:str):</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    </div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        <span class="comment">#FX Hedge orders can only have a quantity of 0</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        order = OrderSamples.MarketOrder(action, 0)</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        order.parentId = parentOrderId</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        order.hedgeType = <span class="stringliteral">&quot;F&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        <span class="keywordflow">return</span> order</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    </div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        <span class="comment"># Parent order on a contract which currency differs from your base currency</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        parent = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 100, 10)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        parent.orderId = self.nextOrderId()</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        <span class="comment"># Hedge on the currency conversion</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        hedge = OrderSamples.MarketFHedge(parent.orderId, <span class="stringliteral">&quot;BUY&quot;</span>)</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        <span class="comment"># Place the parent first...</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        self.placeOrder(parent.orderId, ContractSamples.EuropeanStock(), parent)</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        <span class="comment"># Then the hedge order</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.EurGbpFx(), hedge)</div>
</div><!-- fragment -->  </li>
</ul>
<p>Note that in some cases it will be necessary to include a small delay of 50 ms or less after placing the parent order for processing, before placing the child order. Otherwise the error "10006: Missing parent order" will be triggered.</p>
<p><br/>
<br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN !SS360 SEARCH-->
<script>
var ss360Config = {
    /********* General *********/
    siteId: 'tws-api-doc',
    animationSpeed: 250,
    themeColor: '#A02424',
    showErrors: false,
    /********* Search Box *********/
    searchBoxSelector: '#searchBox',
    searchBoxStyle: {
        text: {
            color: '#ffffff',
            size: '12px',
        },
        background: {
            color: '#000000',
        },
        padding: '8px',        
        icon: {
            image: undefined,
        },
        border: {
            color: '#464646',
            radius: '7px',
        },
        button: {
            text: ' ',
            icon: 'magnifier'
        }
    },
    placeholder: 'Search...',
    searchButton: '#ss360SearchButton',
    /********* Search Suggestions *********/
    showSearchSuggestions: true,
    suggestionsStyle: {
        text: {
            color: '#333333',
        },
        background: {
            color: '#ffffff'
        },
        padding: '10px',
        distanceFromTop: '7px',
        border: {
            color: '#dddddd',
            radius: '7px',
        },
    },
    showImagesSuggestions: true,
    numSuggestions: 6,
    maxQuerySuggestions: 3,
    minChars: 3,
    highlight: true,
    /********* Search Results *********/
    searchResults: undefined,
    searchResultsCaption: 'We found #COUNT# results for your query "#QUERY#"',
    numResults: 50,
    navigation: 'top',
    highlightQueryTerms: true,
    showImagesResults: true,
    showResultLink: true,
    resultLinksOpenNewTab: false,
    queryCorrectionText: 'Did you mean "#CORRECTION#"?',
    noResultsText: 'Sorry, we have not found any matches for your query.',
    otherContentGroupName: 'Other',
    ignoreOtherContentGroup: false,
    moreResultsButton: undefined,
    moreResultsPagingSize: 50,
    groupResults: true,
    loader: {
        type: 'circle'
    }
}
</script>
<script src="https://sitesearch360.com/cdn/sitesearch360-v10.min.js"></script>
<!--END !SS360 SEARCH-->
</body>
</html>
