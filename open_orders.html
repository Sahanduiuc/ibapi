<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72: Retrieving currently active orders</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li></ul>
  </td>
  <td><a href="mailto:api@interactivebrokers.com?subject=TWS API Documentation" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  <!--BEGIN GCS_SEARCHBOX-->
  <td style="position: absolute; right: 0;">
   <div id="google-custom-search" align="right" style="vertical-align: top;">
   <script>
  (function() {
    var cx = '002885114636493240026:q6smajphkxq';
	var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
	</script>
	<gcse:search newWindow="false" enableHistory="true"></gcse:search>
   </div>
   </td>
  <!--END !GCS_SEARCHBOX-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('open_orders.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Retrieving currently active orders </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>As long as an order is active, it is possible to retrieve it using the TWS API. Orders submitted via the TWS API will always be bound to the client application (i.e. client Id) they were submitted from meaning only the submitting client will be able to modify the placed order. Three different methods are provided to allow for maximum flexibility. Active orders will be returned via the <a class="el" href="interfaceIBApi_1_1EWrapper.html#aa05258f1d005accd3efc0d60bc151407">IBApi.EWrapper.openOrder</a> and <a class="el" href="interfaceIBApi_1_1EWrapper.html#a225c060ff9653cfaeff7304033eb76b3">IBApi.EWrapper.orderStatus</a> methods as already described in <a class="el" href="order_submission.html#open_order">The openOrder method</a> and <a class="el" href="order_submission.html#order_status">The orderStatus method</a> sections</p>
<p><b>Note:</b> it is not possible to obtain cancelled or fully filled orders.</p>
<h1><a class="anchor" id="connected_client_orders"></a>
Connected client's own orders</h1>
<p>The <a class="el" href="classIBApi_1_1EClient.html#a11e9c0dce640a3b8ed7a221792412c05">IBApi.EClient.reqOpenOrders</a> method allows to obtain all active orders submitted by the client application connected with the exact same client Id with which the order was sent to the TWS.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            client.reqOpenOrders();</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqOpenOrders();</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqOpenOrders()</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    m_pClient-&gt;reqOpenOrders();</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="all_api_orders"></a>
All API submitted orders</h1>
<p>To obtain those orders created via the TWS API regardless of the submitting client application, make use of the <a class="el" href="classIBApi_1_1EClient.html#aa2c9a012884dd53311a7a7c6a326306c">IBApi.EClient.reqAllOpenOrders</a> function.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            client.reqAllOpenOrders();</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqAllOpenOrders();</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqAllOpenOrders()</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    m_pClient-&gt;reqAllOpenOrders();</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="manually_submitted"></a>
Manually submitted TWS orders</h1>
<p>Finally, <a class="el" href="classIBApi_1_1EClient.html#abe8e30367fff33b9a1171a4580029016">IBApi.EClient.reqAutoOpenOrders</a> will allow to obtain those orders <b>manually placed</b> using the TWS itself. This method also allows the client application to take over these orders and modify them by setting the autoBind parameter to <b>true</b>. If successfully bound, The orders will be assigned (i.e. bound to) an API order id and as such be eligible for modification.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            client.reqAutoOpenOrders(<span class="keyword">true</span>);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqAutoOpenOrders(<span class="keyword">true</span>);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqAutoOpenOrders(True)</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    m_pClient-&gt;reqAutoOpenOrders(<span class="keyword">true</span>);</div>
</div><!-- fragment -->  </li>
</ul>
<p><b>Important:</b> only those applications connecting with client Id 0 will be able to take over manually submitted orders</p>
<p>Through the TWS' API settings it is possible to configure this method's behaviour to some extent. As shown in the image below, manually placed orders can be given a negative order Id which can serve to easily tell manual from API submitted orders. The TWS' tooltip elaborates further:</p>
<div class="image">
<img src="tws_autobind.png" alt="tws_autobind.png"/>
</div>
<h1><a class="anchor" id="receiving_orders"></a>
Receiving Active Orders from the TWS</h1>
<p>Active orders will be delivered via <a class="el" href="order_submission.html#open_order">The openOrder method</a> and <a class="el" href="order_submission.html#order_status">The orderStatus method</a> callbacks. When all orders have been sent to the client application you will receive a <a class="el" href="interfaceIBApi_1_1EWrapper.html#ab86caf7ed61e14d9b5609e8dd60b93e1">IBApi.EWrapper.openOrderEnd</a> event:</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl : EWrapper </div>
<div class="line">    {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> openOrder(<span class="keywordtype">int</span> orderId, Contract contract, Order order, OrderState orderState)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;OpenOrder. ID: &quot;</span>+orderId+<span class="stringliteral">&quot;, &quot;</span>+contract.Symbol+<span class="stringliteral">&quot;, &quot;</span>+contract.SecType+<span class="stringliteral">&quot; @ &quot;</span>+contract.Exchange+<span class="stringliteral">&quot;: &quot;</span>+order.Action+<span class="stringliteral">&quot;, &quot;</span>+order.OrderType+<span class="stringliteral">&quot; &quot;</span>+order.TotalQuantity+<span class="stringliteral">&quot;, &quot;</span>+orderState.Status);</div>
<div class="line">        }</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> orderStatus(<span class="keywordtype">int</span> orderId, <span class="keywordtype">string</span> status, <span class="keywordtype">double</span> filled, <span class="keywordtype">double</span> remaining, <span class="keywordtype">double</span> avgFillPrice, <span class="keywordtype">int</span> permId, <span class="keywordtype">int</span> parentId, <span class="keywordtype">double</span> lastFillPrice, <span class="keywordtype">int</span> clientId, <span class="keywordtype">string</span> whyHeld)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;OrderStatus. Id: &quot;</span>+orderId+<span class="stringliteral">&quot;, Status: &quot;</span>+status+<span class="stringliteral">&quot;, Filled&quot;</span>+filled+<span class="stringliteral">&quot;, Remaining: &quot;</span>+remaining</div>
<div class="line">                +<span class="stringliteral">&quot;, AvgFillPrice: &quot;</span>+avgFillPrice+<span class="stringliteral">&quot;, PermId: &quot;</span>+permId+<span class="stringliteral">&quot;, ParentId: &quot;</span>+parentId+<span class="stringliteral">&quot;, LastFillPrice: &quot;</span>+lastFillPrice+<span class="stringliteral">&quot;, ClientId: &quot;</span>+clientId+<span class="stringliteral">&quot;, WhyHeld: &quot;</span>+whyHeld);</div>
<div class="line">        }</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> openOrderEnd()</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;OpenOrderEnd&quot;</span>);</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl <span class="keyword">implements</span> EWrapper {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> openOrder(<span class="keywordtype">int</span> orderId, Contract contract, Order order,</div>
<div class="line">            OrderState orderState) {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;OpenOrder. ID: &quot;</span>+orderId+<span class="stringliteral">&quot;, &quot;</span>+contract.symbol()+<span class="stringliteral">&quot;, &quot;</span>+contract.secType()+<span class="stringliteral">&quot; @ &quot;</span>+contract.exchange()+<span class="stringliteral">&quot;: &quot;</span>+</div>
<div class="line">            order.action()+<span class="stringliteral">&quot;, &quot;</span>+order.orderType()+<span class="stringliteral">&quot; &quot;</span>+order.totalQuantity()+<span class="stringliteral">&quot;, &quot;</span>+orderState.status());</div>
<div class="line">    }</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> orderStatus(<span class="keywordtype">int</span> orderId, String status, <span class="keywordtype">double</span> filled,</div>
<div class="line">            <span class="keywordtype">double</span> remaining, <span class="keywordtype">double</span> avgFillPrice, <span class="keywordtype">int</span> permId, <span class="keywordtype">int</span> parentId,</div>
<div class="line">            <span class="keywordtype">double</span> lastFillPrice, <span class="keywordtype">int</span> clientId, String whyHeld) {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;OrderStatus. Id: &quot;</span>+orderId+<span class="stringliteral">&quot;, Status: &quot;</span>+status+<span class="stringliteral">&quot;, Filled&quot;</span>+filled+<span class="stringliteral">&quot;, Remaining: &quot;</span>+remaining</div>
<div class="line">                +<span class="stringliteral">&quot;, AvgFillPrice: &quot;</span>+avgFillPrice+<span class="stringliteral">&quot;, PermId: &quot;</span>+permId+<span class="stringliteral">&quot;, ParentId: &quot;</span>+parentId+<span class="stringliteral">&quot;, LastFillPrice: &quot;</span>+lastFillPrice+</div>
<div class="line">                <span class="stringliteral">&quot;, ClientId: &quot;</span>+clientId+<span class="stringliteral">&quot;, WhyHeld: &quot;</span>+whyHeld);</div>
<div class="line">    }</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> openOrderEnd() {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;OpenOrderEnd&quot;</span>);</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Public Class EWrapperImpl</div>
<div class="line">        Implements EWrapper</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Sub openOrder(orderId As Integer, contract As IBApi.Contract, order As IBApi.Order, orderState As IBApi.OrderState) Implements IBApi.EWrapper.openOrder</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;OpenOrder. ID: &quot;</span> &amp; orderId &amp; <span class="stringliteral">&quot;, &quot;</span> &amp; contract.Symbol &amp; <span class="stringliteral">&quot;, &quot;</span> &amp; contract.SecType &amp; <span class="stringliteral">&quot; @ &quot;</span> &amp; contract.Exchange &amp;</div>
<div class="line">                          <span class="stringliteral">&quot;: &quot;</span> &amp; order.Action &amp; <span class="stringliteral">&quot;, &quot;</span> &amp; order.OrderType &amp; <span class="stringliteral">&quot; &quot;</span> &amp; order.TotalQuantity &amp; <span class="stringliteral">&quot;, &quot;</span> &amp; orderState.Status)</div>
<div class="line">        End Sub</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Sub orderStatus(orderId As Integer, status As String, filled As Double, remaining As Double, avgFillPrice As Double, permId As Integer, parentId As Integer, lastFillPrice As Double, clientId As Integer, whyHeld As String) Implements IBApi.EWrapper.orderStatus</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;OrderStatus. Id: &quot;</span> &amp; orderId &amp; <span class="stringliteral">&quot;, Status: &quot;</span> &amp; status &amp; <span class="stringliteral">&quot;, Filled&quot;</span> &amp; filled &amp; <span class="stringliteral">&quot;, Remaining: &quot;</span> &amp; remaining &amp;</div>
<div class="line">                <span class="stringliteral">&quot;, AvgFillPrice: &quot;</span> &amp; avgFillPrice &amp; <span class="stringliteral">&quot;, PermId: &quot;</span> &amp; permId &amp; <span class="stringliteral">&quot;, ParentId: &quot;</span> &amp; parentId &amp; <span class="stringliteral">&quot;, LastFillPrice: &quot;</span> &amp; lastFillPrice &amp;</div>
<div class="line">                <span class="stringliteral">&quot;, ClientId: &quot;</span> &amp; clientId &amp; <span class="stringliteral">&quot;, WhyHeld: &quot;</span> &amp; whyHeld)</div>
<div class="line">        End Sub</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Sub openOrderEnd() Implements IBApi.EWrapper.openOrderEnd</div>
<div class="line">            Console.WriteLine(&quot;OpenOrderEnd&quot;)</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">class </span>TestCppClient : <span class="keyword">public</span> EWrapper</div>
<div class="line">{</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::openOrder( OrderId orderId, <span class="keyword">const</span> Contract&amp; contract, <span class="keyword">const</span> Order&amp; order, <span class="keyword">const</span> OrderState&amp; ostate) {</div>
<div class="line">    printf( <span class="stringliteral">&quot;OpenOrder. ID: %d, %s, %s @ %s: %s, %s, %g, %s\n&quot;</span>, orderId, contract.symbol.c_str(), contract.secType.c_str(), contract.exchange.c_str(), order.action.c_str(), order.orderType.c_str(), order.totalQuantity, ostate.status.c_str());</div>
<div class="line">}</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::orderStatus(OrderId orderId, <span class="keyword">const</span> std::string&amp; status, <span class="keywordtype">double</span> filled,</div>
<div class="line">        <span class="keywordtype">double</span> remaining, <span class="keywordtype">double</span> avgFillPrice, <span class="keywordtype">int</span> permId, <span class="keywordtype">int</span> parentId,</div>
<div class="line">        <span class="keywordtype">double</span> lastFillPrice, <span class="keywordtype">int</span> clientId, <span class="keyword">const</span> std::string&amp; whyHeld){</div>
<div class="line">    printf(<span class="stringliteral">&quot;OrderStatus. Id: %d, Status: %s, Filled: %g, Remaining: %g, AvgFillPrice: %g, PermId: %d, LastFillPrice: %g, ClientId: %d, WhyHeld: %s\n&quot;</span>, orderId, status.c_str(), filled, remaining, avgFillPrice, permId, lastFillPrice, clientId, whyHeld.c_str());</div>
<div class="line">}</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::openOrderEnd() {</div>
<div class="line">    printf( <span class="stringliteral">&quot;OpenOrderEnd\n&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
</ul>
<p><br/>
<br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN GCS_SEARCHBOX-->
<style type='text/css'>
	.gsc-control-cse{
		font family: Arial, sans-serif;
		border-color: #000100;
		background-color: #000000;
		width:250px;
		height: 20px;
		padding-top: 6px;
	}
	input.gsc-search-button {
		background-color: #6D1800;
		color: #fff;
		cursor: pointer;
	}
	input.gsc-search-button:hover {
		background-color: #A02200;
	}
	td.gsc-clear-button {
		position: relative;
		right: 85px;
	}
  }
</style>
<!--END GCS_SEARCHBOX-->
</body>
</html>
