<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>TWS API v9.72+: Receiving Market Data</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  <!--BEGIN GCS_SEARCHBOX-->
  <td style="position: absolute; right: 0;">
   <div id="google-custom-search" align="right" style="vertical-align: top;">
   <script>
  (function() {
    var cx = '002885114636493240026:q6smajphkxq';
	var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
	</script>
	<gcse:search newWindow="false" enableHistory="true"></gcse:search>
   </div>
   </td>
  <!--END !GCS_SEARCHBOX-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_receive.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Receiving Market Data </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="market_data_return"></a>
Receiving Market Data</h1>
<p>Real time data is accessed in the API using a subscribe-and-publish model that is also used with other functionality such as retrieving positon or account values. After a streaming market data subscription request for a particular contract in IB's database is made, a continuous stream of market data is returned by TWS and separated to different functions in EWrapper depending on the data type (integer vs decimal vs string). Since the subscribe-and-publish model is inherently asynchronous, the returned data is linked to the initial request using a numerical label specified in the request called the request ID (reqID).</p>
<p>After subscribing to the ticker stream, your API client will receive the data supplied by the TWS API server via several methods. In your API client code, you will need to implement these methods to manipulate the data relayed back to the client. Notice how market data callbacks such as <a class="el" href="interfaceIBApi_1_1EWrapper.html#ae851ec3a1e0fa2d0964c7779b0c89718">IBApi.EWrapper.tickPrice</a> and <a class="el" href="interfaceIBApi_1_1EWrapper.html#a1844eb442fb657c0f2cc0a63e4e74eba">IBApi.EWrapper.tickSize</a> methods contain the request id with which the response can be mapped to its originating request. By default, there are certain 'default tick types' that are always returned. These include fields such as the bid price, ask price, bid size, ask size, etc. There are additional types of data available with the real time data that are requested by specifying certain "generic tick types" in the market data request. For more information, .</p>
<p>When <a class="el" href="interfaceIBApi_1_1EWrapper.html#ae851ec3a1e0fa2d0964c7779b0c89718" title="Market data tick price callback. Handles all price related ticks. Every tickPrice callback is followe...">IBApi::EWrapper::tickPrice</a> and <a class="el" href="interfaceIBApi_1_1EWrapper.html#a1844eb442fb657c0f2cc0a63e4e74eba" title="Market data tick size callback. Handles all size-related ticks. ">IBApi::EWrapper::tickSize</a> are reported as -1, this indicates that there is no data currently available. Most commonly this occurs when requesting data from markets that are closed. It can also occur for infrequently trading instruments which do not have open bids or offers at that time of the request. To receive frozen quotes (the last available bid/ask recorded by the system) invoke the function <a class="el" href="classIBApi_1_1EClient.html#ae03b31bb2702ba519ed63c46455872b6">IBApi.EClient.reqMarketDataType</a> with argument 2. Alternatively, to receive "delayed frozen" data from tickers without holding market data subscriptions, specify a market data type of 4. Frozen data is exclusive to default tick types- <a class="el" href="md_request.html#genticks">Generic Tick Types</a> are not available- and requires market data subscriptions.</p>
<p>Following every <a class="el" href="interfaceIBApi_1_1EWrapper.html#ae851ec3a1e0fa2d0964c7779b0c89718" title="Market data tick price callback. Handles all price related ticks. Every tickPrice callback is followe...">IBApi::EWrapper::tickPrice</a> callback there will be a <a class="el" href="interfaceIBApi_1_1EWrapper.html#a1844eb442fb657c0f2cc0a63e4e74eba" title="Market data tick size callback. Handles all size-related ticks. ">IBApi::EWrapper::tickSize</a>. This is important because with combo contracts, an actively trading contract can have a price of zero. In this case it will have a positive <a class="el" href="interfaceIBApi_1_1EWrapper.html#a1844eb442fb657c0f2cc0a63e4e74eba" title="Market data tick size callback. Handles all size-related ticks. ">IBApi::EWrapper::tickSize</a> value. <a class="el" href="interfaceIBApi_1_1EWrapper.html#a1844eb442fb657c0f2cc0a63e4e74eba" title="Market data tick size callback. Handles all size-related ticks. ">IBApi::EWrapper::tickSize</a> is also invoked every time there is a change in the size of the last traded price. For that reason, there will be duplicate tickSize events when both the price and size of a trade changes.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl : EWrapper </div><div class="line">    {</div></div><!-- fragment --><p> ... </p><div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> tickPrice(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">int</span> field, <span class="keywordtype">double</span> price, TickAttrib attribs) </div><div class="line">        {</div><div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Tick Price. Ticker Id:&quot;</span>+tickerId+<span class="stringliteral">&quot;, Field: &quot;</span>+field+<span class="stringliteral">&quot;, Price: &quot;</span>+price+<span class="stringliteral">&quot;, CanAutoExecute: &quot;</span>+attribs.CanAutoExecute + </div><div class="line">                <span class="stringliteral">&quot;, PastLimit: &quot;</span> + attribs.PastLimit + <span class="stringliteral">&quot;, PreOpen: &quot;</span> + attribs.PreOpen);</div><div class="line">        }</div></div><!-- fragment --><p> The boolean value canAutoExecute in tickPrice is intended to indicate that a quote is available for immediate execution. The boolean value pastLimit indicates whether the bid price is lower than the day's lowest value or the ask price is higher than the highest ask.</p>
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> tickSize(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">int</span> field, <span class="keywordtype">int</span> size)</div><div class="line">        {</div><div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Tick Size. Ticker Id:&quot;</span> + tickerId + <span class="stringliteral">&quot;, Field: &quot;</span> + field + <span class="stringliteral">&quot;, Size: &quot;</span> + size);</div><div class="line">        }</div></div><!-- fragment --><p> .... </p><div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> tickString(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">int</span> tickType, <span class="keywordtype">string</span> value)</div><div class="line">        {</div><div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Tick string. Ticker Id:&quot;</span> + tickerId + <span class="stringliteral">&quot;, Type: &quot;</span> + tickType + <span class="stringliteral">&quot;, Value: &quot;</span> + value);</div><div class="line">        }</div></div><!-- fragment --><p> .... </p><div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> tickGeneric(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">int</span> field, <span class="keywordtype">double</span> value)</div><div class="line">        {</div><div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Tick Generic. Ticker Id:&quot;</span> + tickerId + <span class="stringliteral">&quot;, Field: &quot;</span> + field + <span class="stringliteral">&quot;, Value: &quot;</span> + value);</div><div class="line">        }</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl <span class="keyword">implements</span> EWrapper {</div></div><!-- fragment --><p> ... </p><div class="fragment"><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> tickPrice(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">int</span> field, <span class="keywordtype">double</span> price, TickAttr attribs) {</div><div class="line">        <a class="code" href="namespaceSystem.html">System</a>.out.println(<span class="stringliteral">&quot;Tick Price. Ticker Id:&quot;</span>+tickerId+<span class="stringliteral">&quot;, Field: &quot;</span>+field+<span class="stringliteral">&quot;, Price: &quot;</span>+price+<span class="stringliteral">&quot;, CanAutoExecute: &quot;</span>+ attribs.canAutoExecute()</div><div class="line">        + <span class="stringliteral">&quot;, pastLimit: &quot;</span> + attribs.pastLimit() + <span class="stringliteral">&quot;, pre-open: &quot;</span> + attribs.preOpen());</div><div class="line">    }</div></div><!-- fragment --><p> The boolean value canAutoExecute in tickPrice is intended to indicate that a quote is available for immediate execution. The boolean value pastLimit indicates whether the bid price is lower than the day's lowest value or the ask price is higher than the highest ask.</p>
<div class="fragment"><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> tickSize(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">int</span> field, <span class="keywordtype">int</span> size) {</div><div class="line">        <a class="code" href="namespaceSystem.html">System</a>.out.println(<span class="stringliteral">&quot;Tick Size. Ticker Id:&quot;</span> + tickerId + <span class="stringliteral">&quot;, Field: &quot;</span> + field + <span class="stringliteral">&quot;, Size: &quot;</span> + size);</div><div class="line">    }</div></div><!-- fragment --><p> ... </p><div class="fragment"><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> tickString(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">int</span> tickType, String value) {</div><div class="line">        <a class="code" href="namespaceSystem.html">System</a>.out.println(<span class="stringliteral">&quot;Tick string. Ticker Id:&quot;</span> + tickerId + <span class="stringliteral">&quot;, Type: &quot;</span> + tickType + <span class="stringliteral">&quot;, Value: &quot;</span> + value);</div><div class="line">    }</div></div><!-- fragment --><p> ... </p><div class="fragment"><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> tickGeneric(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">int</span> tickType, <span class="keywordtype">double</span> value) {</div><div class="line">        <a class="code" href="namespaceSystem.html">System</a>.out.println(<span class="stringliteral">&quot;Tick Generic. Ticker Id:&quot;</span> + tickerId + <span class="stringliteral">&quot;, Field: &quot;</span> + TickType.getField(tickType) + <span class="stringliteral">&quot;, Value: &quot;</span> + value);</div><div class="line">    }</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Public Class EWrapperImpl</div><div class="line">        Implements EWrapper</div></div><!-- fragment --><p> ... </p><div class="fragment"><div class="line">        Public Sub tickPrice(tickerId As Integer, field As Integer, price As Double, attribs As TickAttrib) Implements IBApi.EWrapper.tickPrice</div><div class="line">            Console.WriteLine(&quot;TickPrice - TickerId [&quot; &amp; CStr(tickerId) &amp; &quot;] Field [&quot; &amp; TickType.getField(field) &amp; &quot;] Price [&quot; &amp; CStr(price) &amp; &quot;] PreOpen [&quot; &amp; attribs.PreOpen &amp; &quot;]&quot;)</div><div class="line">        End Sub</div></div><!-- fragment --><p> The boolean value canAutoExecute in tickPrice is intended to indicate that a quote is available for immediate execution. The boolean value pastLimit indicates whether the bid price is lower than the day's lowest value or the ask price is higher than the highest ask.</p>
<div class="fragment"><div class="line">        Public Sub tickSize(tickerId As Integer, field As Integer, size As Integer) Implements IBApi.EWrapper.tickSize</div><div class="line">            Console.WriteLine(&quot;Tick Size. Ticker Id:&quot; &amp; CStr(tickerId) &amp; &quot;, Field: &quot; &amp; TickType.getField(field) &amp; &quot;, Size: &quot; &amp; CStr(size))</div><div class="line">        End Sub</div></div><!-- fragment --><p> .... </p><div class="fragment"><div class="line">        Public Sub tickString(tickerId As Integer, field As Integer, value As String) Implements IBApi.EWrapper.tickString</div><div class="line">            Console.WriteLine(&quot;Tick string. Ticker Id:&quot; &amp; CStr(tickerId) &amp; &quot;, Type: &quot; &amp; TickType.getField(field) &amp; &quot;, Value: &quot; &amp; value)</div><div class="line">        End Sub</div></div><!-- fragment --><p> .... </p><div class="fragment"><div class="line">        Public Sub tickGeneric(tickerId As Integer, field As Integer, value As Double) Implements IBApi.EWrapper.tickGeneric</div><div class="line">            Console.WriteLine(&quot;Tick Generic. Ticker Id:&quot; &amp; tickerId &amp; &quot;, Field: &quot; &amp; field &amp; &quot;, Value: &quot; &amp; value)</div><div class="line">        End Sub</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">class </span>TestCppClient : <span class="keyword">public</span> EWrapper</div><div class="line">{</div></div><!-- fragment --><p> ... </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::tickPrice( TickerId tickerId, TickType field, <span class="keywordtype">double</span> price, <span class="keyword">const</span> TickAttrib&amp; attribs) {</div><div class="line">    printf( <span class="stringliteral">&quot;Tick Price. Ticker Id: %ld, Field: %d, Price: %g, CanAutoExecute: %d, PastLimit: %d, PreOpen: %d\n&quot;</span>, tickerId, (<span class="keywordtype">int</span>)field, price, attribs.canAutoExecute, attribs.pastLimit, attribs.preOpen);</div><div class="line">}</div></div><!-- fragment --><p> The boolean value canAutoExecute in tickPrice is intended to indicate that a quote is available for immediate execution. The boolean value pastLimit indicates whether the bid price is lower than the day's lowest value or the ask price is higher than the highest ask.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::tickSize( TickerId tickerId, TickType field, <span class="keywordtype">int</span> size) {</div><div class="line">    printf( <span class="stringliteral">&quot;Tick Size. Ticker Id: %ld, Field: %d, Size: %d\n&quot;</span>, tickerId, (<span class="keywordtype">int</span>)field, size);</div><div class="line">}</div></div><!-- fragment --><p> .... </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::tickString(TickerId tickerId, TickType tickType, <span class="keyword">const</span> std::string&amp; value) {</div><div class="line">    printf( <span class="stringliteral">&quot;Tick String. Ticker Id: %ld, Type: %d, Value: %s\n&quot;</span>, tickerId, (<span class="keywordtype">int</span>)tickType, value.c_str());</div><div class="line">}</div></div><!-- fragment --><p> .... </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::tickGeneric(TickerId tickerId, TickType tickType, <span class="keywordtype">double</span> value) {</div><div class="line">    printf( <span class="stringliteral">&quot;Tick Generic. Ticker Id: %ld, Type: %d, Value: %g\n&quot;</span>, tickerId, (<span class="keywordtype">int</span>)tickType, value);</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">class </span>TestWrapper(wrapper.EWrapper):</div></div><!-- fragment --><p> ... </p><div class="fragment"><div class="line">    <span class="keyword">def </span>tickPrice(self, reqId: TickerId, tickType: TickType, price: float,</div><div class="line">                  attrib: TickAttrib):</div><div class="line">        super().tickPrice(reqId, tickType, price, attrib)</div><div class="line">        print(<span class="stringliteral">&quot;Tick Price. Ticker Id:&quot;</span>, reqId, <span class="stringliteral">&quot;tickType:&quot;</span>, tickType, <span class="stringliteral">&quot;Price:&quot;</span>,</div><div class="line">              price, <span class="stringliteral">&quot;CanAutoExecute:&quot;</span>, attrib.canAutoExecute,</div><div class="line">              <span class="stringliteral">&quot;PastLimit&quot;</span>, attrib.pastLimit)</div><div class="line"></div></div><!-- fragment --><p> The boolean value canAutoExecute in tickPrice is intended to indicate that a quote is available for immediate execution. The boolean value pastLimit indicates whether the bid price is lower than the day's lowest value or the ask price is higher than the highest ask.</p>
<div class="fragment"><div class="line">    <span class="keyword">def </span>tickSize(self, reqId: TickerId, tickType: TickType, size: int):</div><div class="line">        super().tickSize(reqId, tickType, size)</div><div class="line">        print(<span class="stringliteral">&quot;Tick Size. Ticker Id:&quot;</span>, reqId, <span class="stringliteral">&quot;tickType:&quot;</span>, tickType, <span class="stringliteral">&quot;Size:&quot;</span>, size)</div><div class="line"></div></div><!-- fragment --><p> .... </p><div class="fragment"><div class="line">    <span class="keyword">def </span>tickString(self, reqId: TickerId, tickType: TickType, value: str):</div><div class="line">        super().tickString(reqId, tickType, value)</div><div class="line">        print(<span class="stringliteral">&quot;Tick string. Ticker Id:&quot;</span>, reqId, <span class="stringliteral">&quot;Type:&quot;</span>, tickType, <span class="stringliteral">&quot;Value:&quot;</span>, value)</div><div class="line"></div></div><!-- fragment --><p> .... </p><div class="fragment"><div class="line">    <span class="keyword">def </span>tickGeneric(self, reqId: TickerId, tickType: TickType, value: float):</div><div class="line">        super().tickGeneric(reqId, tickType, value)</div><div class="line">        print(<span class="stringliteral">&quot;Tick Generic. Ticker Id:&quot;</span>, reqId, <span class="stringliteral">&quot;tickType:&quot;</span>, tickType, <span class="stringliteral">&quot;Value:&quot;</span>, value)</div><div class="line"></div></div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="smart_mapping"></a>
Exchange Component Mapping</h1>
<p>A market data request is able to return data from multiple exchanges. Beginning in TWS/IBG v<b>963</b> and API v<b>973.02</b>, after a market data request is made for an instrument covered by market data subscriptions, a message will be sent to function <a class="el" href="interfaceIBApi_1_1EWrapper.html#acdc6b7acebacd83078af3b5c24f23b33" title="tick with BOO exchange and snapshot permissions ">IBApi::EWrapper::tickReqParams</a> with information about 'minTick', BBO exchange mapping, and available snapshot permissions.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> tickReqParams(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">double</span> minTick, <span class="keywordtype">string</span> bboExchange, <span class="keywordtype">int</span> snapshotPermissions)</div><div class="line">        {</div><div class="line">            Console.WriteLine(<span class="stringliteral">&quot;id={0} minTick = {1} bboExchange = {2} snapshotPermissions = {3}&quot;</span>, tickerId, minTick, bboExchange, snapshotPermissions);</div><div class="line"></div><div class="line">            BboExchange = bboExchange;</div><div class="line">        }</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> tickReqParams(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">double</span> minTick, String bboExchange, <span class="keywordtype">int</span> snapshotPermissions) {</div><div class="line">        <a class="code" href="namespaceSystem.html">System</a>.out.println(<span class="stringliteral">&quot;Tick req params. Ticker Id:&quot;</span> + tickerId + <span class="stringliteral">&quot;, Min tick: &quot;</span> + minTick + <span class="stringliteral">&quot;, bbo exchange: &quot;</span> + bboExchange + <span class="stringliteral">&quot;, Snapshot permissions: &quot;</span> + snapshotPermissions);</div><div class="line">    }</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Public Sub tickReqParams(tickerId As Integer, minTick As Double, bboExchange As String, snapshotPermissions As Integer) Implements EWrapper.tickReqParams</div><div class="line">            Console.WriteLine(&quot;id={0} minTick = {1} bboExchange = {2} snapshotPermissions = {3}&quot;, tickerId, minTick, bboExchange, snapshotPermissions)</div><div class="line"></div><div class="line">            Me.BboExchange = bboExchange</div><div class="line">        End Sub</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::tickReqParams(<span class="keywordtype">int</span> tickerId, <span class="keywordtype">double</span> minTick, std::string bboExchange, <span class="keywordtype">int</span> snapshotPermissions) {</div><div class="line">    printf(<span class="stringliteral">&quot;tickerId: %d, minTick: %g, bboExchange: %s, snapshotPermissions: %u&quot;</span>, tickerId, minTick, bboExchange.c_str(), snapshotPermissions);</div><div class="line"></div><div class="line">    m_bboExchange = bboExchange;</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    <span class="keyword">def </span>tickReqParams(self, tickerId:int, minTick:float, bboExchange:str, snapshotPermissions:int):</div><div class="line">        super().tickReqParams(tickerId, minTick, bboExchange, snapshotPermissions)</div><div class="line">        print(<span class="stringliteral">&quot;tickReqParams: &quot;</span>, tickerId, <span class="stringliteral">&quot; minTick: &quot;</span>, minTick, <span class="stringliteral">&quot; bboExchange: &quot;</span>, bboExchange, <span class="stringliteral">&quot; snapshotPermissions: &quot;</span>, snapshotPermissions)</div></div><!-- fragment -->  </li>
</ul>
<p>The exchange mapping identifier <em>bboExchange</em> will be a symbol such as "a6" which can be used to decode the single letter exchange abbreviations returned to the bidExch, askExch, and lastExch fields by invoking the function <a class="el" href="classIBApi_1_1EClient.html#a3c656183f9a8d46349167cf2ebe9dfa2" title="Returns the mapping of single letter codes to exchange names given the mapping identifier. ">IBApi::EClient::reqSmartComponents</a>. More information about <a class="el" href="smart_components.html">Component Exchanges</a>.</p>
<p><a class="el" href="classIBApi_1_1ContractDetails.html#ad854e501feeba56e8f8e7938de5b6adf" title="The minimum allowed price variation. Note that many securities vary their minimum tick size according...">IBApi::ContractDetails::MinTick</a> will represent the smallest possible minimum increment for the contract on any exchange and at any price. For complicated minimum increment structures, such as is common for European stocks, there might be different minimum increments at different price and size levels, so the 'minTick' of the contract will sometimes not represent the minimum increment at which it is presently trading. It is possible to retrieve the complete minimum price increment struture from the API using the function <a class="el" href="classIBApi_1_1EClient.html#af4e8c23a0d1e480ce84320b9e6b525dd" title="Requests details about a given market rule The market rule for an instrument on a particular exchange...">IBApi.EClient.reqMarketRule</a>, or to consult the IB Contracts and Securities search site.</p>
<h1><a class="anchor" id="rerouting"></a>
Re-Routing CFDs</h1>
<p>IB does not provide market data for certain types of instruments, such as stock CFDs and forex CFDs. If a stock CFD or forex CFD is entered into a TWS watchlist, TWS will automatically display market data for the underlying ticker and show a 'U' icon next to the instrument name to indicate that the data is for the underlying instrument.</p>
<p>From the API, when level 1 or level 2 market data is requested for a stock CFD or a forex CFD, a callback is made to the functions <a class="el" href="interfaceIBApi_1_1EWrapper.html#a5842c4697f678debff53febb8c8b62d0" title="returns conId and exchange for CFD market data request re-route ">IBApi::EWrapper::rerouteMktDataReq</a> or <a class="el" href="interfaceIBApi_1_1EWrapper.html#a9c8b54c60cd4f78233efae1dd8903cd7" title="returns the conId and exchange for an underlying contract when a request is made for level 2 data for...">IBApi::EWrapper::rerouteMktDepthReq</a> respectively with details about the underlying instrument in IB's database which does have market data.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> rerouteMktDataReq(<span class="keywordtype">int</span> reqId, <span class="keywordtype">int</span> conId, <span class="keywordtype">string</span> exchange)</div><div class="line">        {</div><div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Re-route market data request. Req Id: {0}, ConId: {1}, Exchange: {2}&quot;</span>, reqId, conId, exchange);</div><div class="line">        }</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> rerouteMktDataReq(<span class="keywordtype">int</span> reqId, <span class="keywordtype">int</span> conId, String exchange) {</div><div class="line">        <a class="code" href="namespaceSystem.html">System</a>.out.println(EWrapperMsgGenerator.rerouteMktDataReq(reqId, conId, exchange));</div><div class="line">    }</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Public Sub rerouteMktDataReq(reqId As Integer, conId As Integer, exchange As String) Implements IBApi.EWrapper.rerouteMktDataReq</div><div class="line">            Console.WriteLine(&quot;Re-route market data request. Req Id: {0}, Con Id: {1}, Exchange: {2}&quot;, reqId, conId, exchange)</div><div class="line">        End Sub</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::rerouteMktDataReq(<span class="keywordtype">int</span> reqId, <span class="keywordtype">int</span> conid, <span class="keyword">const</span> std::string&amp; exchange) {</div><div class="line">    printf( <span class="stringliteral">&quot;Re-route market data request. ReqId: %d, ConId: %d, Exchange: %s\n&quot;</span>, reqId, conid, exchange.c_str());</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"></div><!-- fragment -->  </li>
</ul>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> rerouteMktDepthReq(<span class="keywordtype">int</span> reqId, <span class="keywordtype">int</span> conId, <span class="keywordtype">string</span> exchange)</div><div class="line">        {</div><div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Re-route market depth request. Req Id: {0}, ConId: {1}, Exchange: {2}&quot;</span>, reqId, conId, exchange);</div><div class="line">        }</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    @Override</div><div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> rerouteMktDepthReq(<span class="keywordtype">int</span> reqId, <span class="keywordtype">int</span> conId, String exchange) {</div><div class="line">        <a class="code" href="namespaceSystem.html">System</a>.out.println(EWrapperMsgGenerator.rerouteMktDepthReq(reqId, conId, exchange));</div><div class="line">    }</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Public Sub rerouteMktDepthReq(reqId As Integer, conId As Integer, exchange As String) Implements IBApi.EWrapper.rerouteMktDepthReq</div><div class="line">            Console.WriteLine(&quot;Re-route market depth request. Req Id: {0}, Con Id: {1}, Exchange: {2}&quot;, reqId, conId, exchange)</div><div class="line">        End Sub</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::rerouteMktDepthReq(<span class="keywordtype">int</span> reqId, <span class="keywordtype">int</span> conid, <span class="keyword">const</span> std::string&amp; exchange) {</div><div class="line">    printf( <span class="stringliteral">&quot;Re-route market depth request. ReqId: %d, ConId: %d, Exchange: %s\n&quot;</span>, reqId, conid, exchange.c_str());</div><div class="line">}</div></div><!-- fragment -->  </li>
<li>
<div class="fragment"></div><!-- fragment -->  </li>
</ul>
<p><br />
<br />
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN GCS_SEARCHBOX-->
<style type='text/css'>
	.gsc-control-cse{
		font family: Arial, sans-serif;
		border-color: #000100;
		background-color: #000000;
		width:260px;
		height: 20px;
		padding-top: 6px;
	}
	input.gsc-search-button {
		background-color: #6D1800;
		color: #fff;
		cursor: pointer;
	}
	input.gsc-search-button:hover {
		background-color: #A02200;
	}
	td.gsc-clear-button {
		position: relative;
		right: 85px;
	}
  }
</style>
<!--END GCS_SEARCHBOX-->
</body>
</html>
