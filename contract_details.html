<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72+: Requesting Contract Details</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  <!--BEGIN GCS_SEARCHBOX-->
  <td style="position: absolute; right: 0;">
   <div id="google-custom-search" align="right" style="vertical-align: top;">
   <script>
  (function() {
    var cx = '002885114636493240026:q6smajphkxq';
	var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
	</script>
	<gcse:search newWindow="false" enableHistory="true"></gcse:search>
   </div>
   </td>
  <!--END !GCS_SEARCHBOX-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('contract_details.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Requesting Contract Details </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="classIBApi_1_1ContractDetails.html">IBApi.ContractDetails</a> can be received from the API by the <a class="el" href="classIBApi_1_1EClient.html#ade440c6db838b548594981d800ea5ca9">IBApi.EClient.reqContractDetails</a> function. This method takes as argument a <a class="el" href="classIBApi_1_1Contract.html">IBApi.Contract</a> object which may be incompletely-defined and so not matching a single contract in IB's database unambiguously. In reply, fully-defined contract objects with all fields specified which match the supplied Contract's parameters will be individually returned to the <a class="el" href="interfaceIBApi_1_1EWrapper.html#a1b767810613c700b5bb1056a836da0bc" title="receives the full contract&#39;s definitons This method will return all contracts matching the requested ...">IBApi::EWrapper::contractDetails</a> function. The one exception is Bond contracts, which will be returned to the function <a class="el" href="interfaceIBApi_1_1EWrapper.html#a40b122cde44711d81929df50f3a3f342" title="Delivers the Bond contract data after this has been requested via reqContractDetails. ">IBApi::EWrapper::bondContractDetails</a>. Because of market data license restrictions, there are only a few available fields to be returned in a bond contract description, namely the minTick, exchange, currency, and short name.</p>
<p><b>Note</b>: Invoking reqContractDetails with a Contract object which has currency = USD will only return US contracts, even if there are non-US instruments which have the USD currency.</p>
<p>One particular use of the <a class="el" href="classIBApi_1_1EClient.html#ade440c6db838b548594981d800ea5ca9" title="Requests contract information. This method will provide all the contracts matching the contract provi...">IBApi::EClient::reqContractDetails</a> function is to request an option chain. See <a class="el" href="options.html#option_chains">Option Chains</a> for more details.</p>
<h1><a class="anchor" id="broadtape_list"></a>
BroadTape News List</h1>
<p>The example below shows an "incomplete" news <a class="el" href="classIBApi_1_1Contract.html">IBApi.Contract</a> with no symbol or currency defined. In most cases using such a contract would result in an invalid contract details error since a symbol or localSymbol is required. <a class="el" href="classIBApi_1_1EClient.html#ade440c6db838b548594981d800ea5ca9">IBApi.EClient.reqContractDetails</a> will instead use it to obtain the whole BroadTape news chain from the TWS.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Contract contract = <span class="keyword">new</span> Contract();</div>
<div class="line">            contract.SecType = <span class="stringliteral">&quot;NEWS&quot;</span>;</div>
<div class="line">            contract.Exchange = <span class="stringliteral">&quot;BT&quot;</span>; <span class="comment">//Briefing Trader</span></div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            client.reqContractDetails(211, ContractSamples.NewsFeedForQuery());</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Contract contract = <span class="keyword">new</span> Contract();</div>
<div class="line">        contract.secType(<span class="stringliteral">&quot;NEWS&quot;</span>);</div>
<div class="line">        contract.exchange(<span class="stringliteral">&quot;BT&quot;</span>); <span class="comment">//Briefing Trader</span></div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        client.reqContractDetails(211, ContractSamples.NewsFeedForQuery());</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">            Dim contract As Contract = New Contract()</div>
<div class="line">            contract.SecType = &quot;NEWS&quot;</div>
<div class="line">            contract.Exchange = &quot;BT&quot; &#39;Briefing Trader</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        client.reqContractDetails(211, ContractSamples.NewsFeedForQuery())</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Contract contract;</div>
<div class="line">    contract.secType = <span class="stringliteral">&quot;NEWS&quot;</span>;</div>
<div class="line">    contract.exchange = <span class="stringliteral">&quot;BT&quot;</span>; <span class="comment">//Briefing Trader</span></div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    m_pClient-&gt;reqContractDetails(211, ContractSamples::NewsFeedForQuery());</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        contract = Contract()</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        contract.secType = <span class="stringliteral">&quot;NEWS&quot;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        contract.exchange = <span class="stringliteral">&quot;BT&quot;</span> <span class="comment">#Briefing Trader</span></div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        self.reqContractDetails(213, ContractSamples.NewsFeedForQuery())</div>
</div><!-- fragment -->  </li>
</ul>
<p>All returned objects will be delivered via <a class="el" href="interfaceIBApi_1_1EWrapper.html#a1b767810613c700b5bb1056a836da0bc">IBApi.EWrapper.contractDetails</a>. Once all contracts have been delivered the <a class="el" href="interfaceIBApi_1_1EWrapper.html#a4e9466339bac7149c2fdb48cda0dd088">IBApi.EWrapper.contractDetailsEnd</a> marker will be triggered to notify it.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl : EWrapper </div>
<div class="line">    {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> contractDetails(<span class="keywordtype">int</span> reqId, ContractDetails contractDetails)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;ContractDetails. ReqId: &quot;</span>+reqId+<span class="stringliteral">&quot; - &quot;</span>+contractDetails.Summary.Symbol+<span class="stringliteral">&quot;, &quot;</span>+contractDetails.Summary.SecType+<span class="stringliteral">&quot;, ConId: &quot;</span>+contractDetails.Summary.ConId+<span class="stringliteral">&quot; @ &quot;</span>+contractDetails.Summary.Exchange);</div>
<div class="line">        }</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> contractDetailsEnd(<span class="keywordtype">int</span> reqId)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;ContractDetailsEnd. &quot;</span>+reqId+<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>EWrapperImpl <span class="keyword">implements</span> EWrapper {</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> contractDetails(<span class="keywordtype">int</span> reqId, ContractDetails contractDetails) {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;ContractDetails. ReqId: [&quot;</span>+reqId+<span class="stringliteral">&quot;] - [&quot;</span>+contractDetails.contract().symbol()+<span class="stringliteral">&quot;], [&quot;</span>+contractDetails.contract().secType()+<span class="stringliteral">&quot;], ConId: [&quot;</span>+contractDetails.contract().conid()+<span class="stringliteral">&quot;] @ [&quot;</span>+contractDetails.contract().exchange()+<span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line">    }</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> contractDetailsEnd(<span class="keywordtype">int</span> reqId) {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;ContractDetailsEnd. &quot;</span>+reqId+<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Public Class EWrapperImpl</div>
<div class="line">        Implements EWrapper</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Sub contractDetails(reqId As Integer, contractDetails As IBApi.ContractDetails) Implements IBApi.EWrapper.contractDetails</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;ContractDetails - ReqId [&quot;</span> &amp; reqId &amp; <span class="stringliteral">&quot;] ContractDetails [&quot;</span> &amp; contractDetails.Summary.Symbol &amp; <span class="stringliteral">&quot;]&quot;</span>)</div>
<div class="line">        End Sub</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Sub contractDetailsEnd(reqId As Integer) Implements IBApi.EWrapper.contractDetailsEnd</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;ContractDetailsEnd - ReqId [&quot;</span> &amp; reqId &amp; <span class="stringliteral">&quot;]&quot;</span>)</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keyword">class </span>TestCppClient : <span class="keyword">public</span> EWrapper</div>
<div class="line">{</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::contractDetails( <span class="keywordtype">int</span> reqId, <span class="keyword">const</span> ContractDetails&amp; contractDetails) {</div>
<div class="line">    printf( <span class="stringliteral">&quot;ContractDetails. ReqId: %d - %s, %s, ConId: %ld @ %s, Trading Hours: %s, Liquid Hours: %s, Under Symbol: %s, Under SecType: %s\n&quot;</span>, reqId, </div>
<div class="line">        contractDetails.summary.symbol.c_str(), contractDetails.summary.secType.c_str(), contractDetails.summary.conId, contractDetails.summary.exchange.c_str(), </div>
<div class="line">        contractDetails.tradingHours.c_str(), contractDetails.liquidHours.c_str(), </div>
<div class="line">        contractDetails.underSymbol.c_str(), contractDetails.underSecType.c_str());</div>
<div class="line">}</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::contractDetailsEnd( <span class="keywordtype">int</span> reqId) {</div>
<div class="line">    printf( <span class="stringliteral">&quot;ContractDetailsEnd. %d\n&quot;</span>, reqId);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">class </span>TestWrapper(wrapper.EWrapper):</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    <span class="keyword">def </span>contractDetails(self, reqId: int, contractDetails: ContractDetails):</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        super().contractDetails(reqId, contractDetails)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        printinstance(contractDetails.summary)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    <span class="keyword">def </span>contractDetailsEnd(self, reqId: int):</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        super().contractDetailsEnd(reqId)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        print(<span class="stringliteral">&quot;ContractDetailsEnd. &quot;</span>, reqId, <span class="stringliteral">&quot;\n&quot;</span>)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<p><b>Important:</b> due to the potentially high amount of data resulting from such queries this request is subject to pacing. Although a request such as the above one will be answered immediately, a similar subsequent one will be kept on hold for one minute. This amount of time will increase if more such requests are performed. To prevent this narrow down the amount of eligible contracts by providing an expiration date specifying at least the year (i.e. 2016) or the year and the month (i.e. 201603 for March 2016).</p>
<p><br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN GCS_SEARCHBOX-->
<style type='text/css'>
	.gsc-control-cse{
		font family: Arial, sans-serif;
		border-color: #000100;
		background-color: #000000;
		width:250px;
		height: 20px;
		padding-top: 6px;
	}
	input.gsc-search-button {
		background-color: #6D1800;
		color: #fff;
		cursor: pointer;
	}
	input.gsc-search-button:hover {
		background-color: #A02200;
	}
	td.gsc-clear-button {
		position: relative;
		right: 85px;
	}
  }
</style>
<!--END GCS_SEARCHBOX-->
</body>
</html>
