<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72+: Family Codes</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <!--BEGIN SS360 SEARCH-->
  <td>
	<div id="site-search-360" align="right" style="padding-left: 1em;">
		<input id="searchBox" type="search" placeholder="Search..." />
		<input id="ss360SearchButton" type="submit" />
	</div>
  </td>
  <!--END SS360 SEARCH-->
  <div id="contact-us" align="right">
	<td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  </div>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('family_codes.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Family Codes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Starting with API <b>v973.02</b> and TWS <b>v964</b>, it is possible to determine from the API whether an account exists under an account family, and find the family code using the function reqFamilyCodes.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            client.reqFamilyCodes();</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqFamilyCodes();</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqFamilyCodes()</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    m_pClient-&gt;reqFamilyCodes();</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        self.reqFamilyCodes()</div>
</div><!-- fragment -->  </li>
</ul>
<p>If a managed account is part of an account family (for instance an individual account under a Financial Advisor or IBroker), that family will be returned to the function <a class="el" href="interfaceIBApi_1_1EWrapper.html" title="This interface&#39;s methods are used by the TWS/Gateway to communicate with the API client. Every API client application needs to implement this interface in order to handle all the events generated by the TWS/Gateway. Almost every EClientSocket method call will result in at least one event delivered here. ">IBApi::EWrapper</a>:familyCodes. Otherwise it will return an empty string.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> familyCodes(FamilyCode[] familyCodes)</div>
<div class="line">        {</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Family Codes:&quot;</span>);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">foreach</span> (var familyCode <span class="keywordflow">in</span> familyCodes)</div>
<div class="line">            {</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Account ID: {0}, Family Code Str: {1}&quot;</span>, familyCode.AccountID, familyCode.FamilyCodeStr);</div>
<div class="line">            }</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> familyCodes(FamilyCode[] familyCodes) {</div>
<div class="line">        <span class="keywordflow">for</span> (FamilyCode fc : familyCodes) {</div>
<div class="line">            System.out.print(<span class="stringliteral">&quot;Family Code. AccountID: &quot;</span> + fc.accountID() + <span class="stringliteral">&quot;, FamilyCode: &quot;</span> + fc.familyCodeStr());</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        System.out.println();</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Public Sub familyCodes(familyCodes As FamilyCode()) Implements EWrapper.familyCodes</div>
<div class="line">            Console.WriteLine(&quot;Family Codes:&quot;)</div>
<div class="line"></div>
<div class="line">            For Each familyCode In familyCodes</div>
<div class="line">                Console.WriteLine(&quot;Account ID: &quot; &amp; familyCode.AccountID &amp; &quot; Family Code Str: &quot; &amp; familyCode.FamilyCodeStr)</div>
<div class="line">            Next</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::familyCodes(<span class="keyword">const</span> std::vector&lt;FamilyCode&gt; &amp;familyCodes) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Family codes (%lu):\n&quot;</span>, familyCodes.size());</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; familyCodes.size(); i++) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Family code [%d] - accountID: %s familyCodeStr: %s\n&quot;</span>, i, familyCodes[i].accountID.c_str(), familyCodes[i].familyCodeStr.c_str());</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    <span class="keyword">def </span>familyCodes(self, familyCodes: ListOfFamilyCode):</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        super().familyCodes(familyCodes)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        print(<span class="stringliteral">&quot;Family Codes:&quot;</span>)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        <span class="keywordflow">for</span> familyCode <span class="keywordflow">in</span> familyCodes:</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;            print(<span class="stringliteral">&quot;Account ID: %s, Family Code Str: %s&quot;</span> % (</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;                familyCode.accountID, familyCode.familyCodeStr))</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<p>For instance, if individual account U112233 is under a financial advisor with account number F445566, if the function reqFamilyCodes is invoked for the user of account U112233, the family code "F445566A" will be returned, indicating that it belongs within that account family. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN !SS360 SEARCH-->
<script>
var ss360Config = {
    /********* General *********/
    siteId: 'tws-api-doc',
    animationSpeed: 250,
    themeColor: '#A02424',
    showErrors: false,
    /********* Search Box *********/
    searchBoxSelector: '#searchBox',
    searchBoxStyle: {
        text: {
            color: '#ffffff',
            size: '12px',
        },
        background: {
            color: '#000000',
        },
        padding: '8px',        
        icon: {
            image: undefined,
        },
        border: {
            color: '#464646',
            radius: '7px',
        },
        button: {
            text: ' ',
            icon: 'magnifier'
        }
    },
    placeholder: 'Search...',
    searchButton: '#ss360SearchButton',
    /********* Search Suggestions *********/
    showSearchSuggestions: true,
    suggestionsStyle: {
        text: {
            color: '#333333',
        },
        background: {
            color: '#ffffff'
        },
        padding: '10px',
        distanceFromTop: '7px',
        border: {
            color: '#dddddd',
            radius: '7px',
        },
    },
    showImagesSuggestions: true,
    numSuggestions: 6,
    maxQuerySuggestions: 3,
    minChars: 3,
    highlight: true,
    /********* Search Results *********/
    searchResults: undefined,
    searchResultsCaption: 'We found #COUNT# results for your query "#QUERY#"',
    numResults: 50,
    navigation: 'top',
    highlightQueryTerms: true,
    showImagesResults: true,
    showResultLink: true,
    resultLinksOpenNewTab: false,
    queryCorrectionText: 'Did you mean "#CORRECTION#"?',
    noResultsText: 'Sorry, we have not found any matches for your query.',
    otherContentGroupName: 'Other',
    ignoreOtherContentGroup: false,
    moreResultsButton: undefined,
    moreResultsPagingSize: 50,
    groupResults: true,
    loader: {
        type: 'circle'
    }
}
</script>
<script src="https://sitesearch360.com/cdn/sitesearch360-v10.min.js"></script>
<!--END !SS360 SEARCH-->
</body>
</html>
