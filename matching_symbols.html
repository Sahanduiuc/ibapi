<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72+: Stock Contract Search</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <!--BEGIN SS360 SEARCH-->
  <td>
	<div id="site-search-360" align="right" style="padding-left: 1em;">
		<input id="searchBox" type="search" placeholder="Search..." />
		<input id="ss360SearchButton" type="submit" />
	</div>
  </td>
  <!--END SS360 SEARCH-->
  <div id="contact-us" align="right">
	<td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  </div>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('matching_symbols.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Stock Contract Search </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Starting in API <b>v973.02</b> and TWS <b>v964</b>, a function <a class="el" href="classIBApi_1_1EClient.html#aa0bff193c5cbaa73e89dccdd0f027195" title="Requests matching stock symbols. ">IBApi::EClient::reqMatchingSymbols</a> is available to search for stock contracts. The input can be either the first few letters of the ticker symbol, or for longer strings, a character sequence matching a word in the security name. For instance to search for the stock symbol 'IBKR', the input 'I' or 'IB' can be used, as well as the word 'Interactive'. Up to 16 matching results are returned.</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            client.reqMatchingSymbols(211, <span class="stringliteral">&quot;IB&quot;</span>);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqMatchingSymbols(211, <span class="stringliteral">&quot;IB&quot;</span>);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        client.reqMatchingSymbols(202, <span class="stringliteral">&quot;IB&quot;</span>)</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    m_pClient-&gt;reqMatchingSymbols(11001, <span class="stringliteral">&quot;IBM&quot;</span>);</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        self.reqMatchingSymbols(212, <span class="stringliteral">&quot;IB&quot;</span>)</div>
</div><!-- fragment -->  </li>
</ul>
<p>Matching stock contracts are returned to <a class="el" href="interfaceIBApi_1_1EWrapper.html#a82cfd0c663944c5e6d4fee8ebd482ecf" title="returns array of sample contract descriptions ">IBApi::EWrapper::symbolSamples</a> with information about types of derivative contracts which exist (warrants, options, dutch warrants, futures).</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> symbolSamples(<span class="keywordtype">int</span> reqId, ContractDescription[] contractDescriptions) </div>
<div class="line">        {</div>
<div class="line">            <span class="keywordtype">string</span> derivSecTypes;</div>
<div class="line">            Console.WriteLine(<span class="stringliteral">&quot;Symbol Samples. Request Id: {0}&quot;</span>, reqId);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">foreach</span> (var contractDescription <span class="keywordflow">in</span> contractDescriptions)</div>
<div class="line">            {</div>
<div class="line">                derivSecTypes = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">                <span class="keywordflow">foreach</span> (var derivSecType <span class="keywordflow">in</span> contractDescription.DerivativeSecTypes)</div>
<div class="line">                {</div>
<div class="line">                    derivSecTypes += derivSecType;</div>
<div class="line">                    derivSecTypes += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line">                }</div>
<div class="line">                Console.WriteLine(<span class="stringliteral">&quot;Contract: conId - {0}, symbol - {1}, secType - {2}, primExchange - {3}, currency - {4}, derivativeSecTypes - {5}&quot;</span>, </div>
<div class="line">                    contractDescription.Contract.ConId, contractDescription.Contract.Symbol, contractDescription.Contract.SecType, </div>
<div class="line">                    contractDescription.Contract.PrimaryExch, contractDescription.Contract.Currency, derivSecTypes);</div>
<div class="line">            }</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    @Override</div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> symbolSamples(<span class="keywordtype">int</span> reqId, ContractDescription[] contractDescriptions) {</div>
<div class="line">        System.out.println(<span class="stringliteral">&quot;Contract Descriptions. Request: &quot;</span> + reqId + <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">for</span> (ContractDescription  cd : contractDescriptions) {</div>
<div class="line">            Contract c = cd.contract();</div>
<div class="line">            StringBuilder derivativeSecTypesSB = <span class="keyword">new</span> StringBuilder();</div>
<div class="line">            <span class="keywordflow">for</span> (String str : cd.derivativeSecTypes()) {</div>
<div class="line">                derivativeSecTypesSB.append(str);</div>
<div class="line">                derivativeSecTypesSB.append(<span class="stringliteral">&quot;,&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">            System.out.print(<span class="stringliteral">&quot;Contract. ConId: &quot;</span> + c.conid() + <span class="stringliteral">&quot;, Symbol: &quot;</span> + c.symbol() + <span class="stringliteral">&quot;, SecType: &quot;</span> + c.secType() + </div>
<div class="line">                    <span class="stringliteral">&quot;, PrimaryExch: &quot;</span> + c.primaryExch() + <span class="stringliteral">&quot;, Currency: &quot;</span> + c.currency() + </div>
<div class="line">                    <span class="stringliteral">&quot;, DerivativeSecTypes:[&quot;</span> + derivativeSecTypesSB.toString() + <span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        System.out.println();</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Public Sub symbolSamples(reqId As Integer, contractDescriptions As ContractDescription()) Implements EWrapper.symbolSamples</div>
<div class="line">            Dim derivSecTypes As String</div>
<div class="line"></div>
<div class="line">            Console.WriteLine(&quot;Symbol Samples. Request Id: &quot; &amp; reqId)</div>
<div class="line"></div>
<div class="line">            For Each contractDescription In contractDescriptions</div>
<div class="line">                derivSecTypes = &quot;&quot;</div>
<div class="line">                For Each derivSecType In contractDescription.DerivativeSecTypes</div>
<div class="line">                    derivSecTypes += derivSecType</div>
<div class="line">                    derivSecTypes += &quot; &quot;</div>
<div class="line">                Next</div>
<div class="line">                Console.WriteLine(&quot;Contract: conId - &quot; &amp; contractDescription.Contract.ConId &amp; &quot;, symbol - &quot; &amp; contractDescription.Contract.Symbol &amp;</div>
<div class="line">                                  &quot;, secType -&quot; &amp; contractDescription.Contract.SecType &amp; &quot;, primExchange - &quot; &amp; contractDescription.Contract.PrimaryExch &amp;</div>
<div class="line">                                  &quot;, currency - &quot; &amp; contractDescription.Contract.Currency &amp; &quot;, derivativeSecTypes - &quot; &amp; derivSecTypes)</div>
<div class="line">            Next</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> TestCppClient::symbolSamples(<span class="keywordtype">int</span> reqId, <span class="keyword">const</span> std::vector&lt;ContractDescription&gt; &amp;contractDescriptions) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Symbol Samples (total=%lu) reqId: %d\n&quot;</span>, contractDescriptions.size(), reqId);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; contractDescriptions.size(); i++) {</div>
<div class="line">        Contract contract = contractDescriptions[i].contract;</div>
<div class="line">        std::vector&lt;std::string&gt; derivativeSecTypes = contractDescriptions[i].derivativeSecTypes;</div>
<div class="line">        printf(<span class="stringliteral">&quot;Contract (%u): %ld %s %s %s %s, &quot;</span>, i, contract.conId, contract.symbol.c_str(), contract.secType.c_str(), contract.primaryExchange.c_str(), contract.currency.c_str());</div>
<div class="line">        printf(<span class="stringliteral">&quot;Derivative Sec-types (%lu):&quot;</span>, derivativeSecTypes.size());</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; derivativeSecTypes.size(); j++) {</div>
<div class="line">            printf(<span class="stringliteral">&quot; %s&quot;</span>, derivativeSecTypes[j].c_str());</div>
<div class="line">        }</div>
<div class="line">        printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    <span class="keyword">def </span>symbolSamples(self, reqId: int,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                      contractDescriptions: ListOfContractDescription):</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        super().symbolSamples(reqId, contractDescriptions)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        print(<span class="stringliteral">&quot;Symbol Samples. Request Id: &quot;</span>, reqId)</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        <span class="keywordflow">for</span> contractDescription <span class="keywordflow">in</span> contractDescriptions:</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            derivSecTypes = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;            <span class="keywordflow">for</span> derivSecType <span class="keywordflow">in</span> contractDescription.derivativeSecTypes:</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                derivSecTypes += derivSecType</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                derivSecTypes += <span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;            print(<span class="stringliteral">&quot;Contract: conId:%s, symbol:%s, secType:%s primExchange:%s, &quot;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;                  <span class="stringliteral">&quot;currency:%s, derivativeSecTypes:%s&quot;</span> % (</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                contractDescription.contract.conId,</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;                contractDescription.contract.symbol,</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                contractDescription.contract.secType,</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;                contractDescription.contract.primaryExchange,</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                contractDescription.contract.currency, derivSecTypes))</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<p><br/>
<br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN !SS360 SEARCH-->
<script>
var ss360Config = {
    /********* General *********/
    siteId: 'tws-api-doc',
    animationSpeed: 250,
    themeColor: '#A02424',
    showErrors: false,
    /********* Search Box *********/
    searchBoxSelector: '#searchBox',
    searchBoxStyle: {
        text: {
            color: '#ffffff',
            size: '12px',
        },
        background: {
            color: '#000000',
        },
        padding: '8px',        
        icon: {
            image: undefined,
        },
        border: {
            color: '#464646',
            radius: '7px',
        },
        button: {
            text: ' ',
            icon: 'magnifier'
        }
    },
    placeholder: 'Search...',
    searchButton: '#ss360SearchButton',
    /********* Search Suggestions *********/
    showSearchSuggestions: true,
    suggestionsStyle: {
        text: {
            color: '#333333',
        },
        background: {
            color: '#ffffff'
        },
        padding: '10px',
        distanceFromTop: '7px',
        border: {
            color: '#dddddd',
            radius: '7px',
        },
    },
    showImagesSuggestions: true,
    numSuggestions: 6,
    maxQuerySuggestions: 3,
    minChars: 3,
    highlight: true,
    /********* Search Results *********/
    searchResults: undefined,
    searchResultsCaption: 'We found #COUNT# results for your query "#QUERY#"',
    numResults: 50,
    navigation: 'top',
    highlightQueryTerms: true,
    showImagesResults: true,
    showResultLink: true,
    resultLinksOpenNewTab: false,
    queryCorrectionText: 'Did you mean "#CORRECTION#"?',
    noResultsText: 'Sorry, we have not found any matches for your query.',
    otherContentGroupName: 'Other',
    ignoreOtherContentGroup: false,
    moreResultsButton: undefined,
    moreResultsPagingSize: 50,
    groupResults: true,
    loader: {
        type: 'circle'
    }
}
</script>
<script src="https://sitesearch360.com/cdn/sitesearch360-v10.min.js"></script>
<!--END !SS360 SEARCH-->
</body>
</html>
