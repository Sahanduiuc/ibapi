<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72+: Complex Syntax</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  <!--BEGIN GCS_SEARCHBOX-->
  <td style="position: absolute; right: 0;">
   <div id="google-custom-search" align="right" style="vertical-align: top;">
   <script>
  (function() {
    var cx = '002885114636493240026:q6smajphkxq';
	var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
	</script>
	<gcse:search newWindow="false" enableHistory="true"></gcse:search>
   </div>
   </td>
  <!--END !GCS_SEARCHBOX-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('rtd_complex_syntax.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Complex Syntax </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Complex Syntax provides the most flexibility that it allows users to customize all formula strings individually, where each string only represent one single parameter. There is no rule for the sequence of the appearance of each parameter.</p>
<p><code class="rtd_formula"> =RTD(<b>ProgID</b>, <b>Server</b>, <b>String1</b>, <b>String2</b>, <b>String3</b>...) </code></p>
<p>where</p>
<ul>
<li><b>ProgID</b> = "Tws.TwsRtdServerCtrl"</li>
<li><b>Server</b> = "" (empty string)</li>
</ul>
<p>For exmaple, the formula below will request the Ask Size for IBM:</p>
<p><code class="rtd_formula"> =RTD("Tws.TwsRtdServerCtrl",,"sym=IBM", "sec=STK", "exch=ISLAND", "qt=AskSize") </code></p>
<p>The formula below will request the Bid price for IBM:</p>
<p><code class="rtd_formula"> =RTD("Tws.TwsRtdServerCtrl",,"sym=ES", "sec=FUT", "exch=GLOBEX", "cur=USD", "exp=201712", "qt=Bid") </code></p>
<h1><a class="anchor" id="rtd_complex_syntax_strings"></a>
Complex Syntax Strings</h1>
<p>See table below for a full list available Complex Syntax strings:</p>
<table class="doxtable">
<tr>
<th>Name</th><th>String Syntax</th><th>Description </th></tr>
<tr>
<td>Contract ID</td><td>"conid="</td><td>The unique contract ID generated by IB. Can be found at TWS <a class="el" href="contracts.html">Contract Description</a> . </td></tr>
<tr>
<td>Symbol</td><td>"sym="</td><td>The contract symbol. </td></tr>
<tr>
<td>SecurityType</td><td>"sec="</td><td>The type of security, e.g. 'STK', 'FUT' and so on. </td></tr>
<tr>
<td>LastTradeDateOrContractMonth</td><td>"exp="</td><td>Format 'YYYYMMDD' is used for defining the Last Trade Date, while format 'YYYYMM' is used for defining the Contract Month. </td></tr>
<tr>
<td>Strike</td><td>"strike="</td><td>The strike price for an option contract. </td></tr>
<tr>
<td>Right</td><td>"right="</td><td>'C' or 'P' for an option contract. </td></tr>
<tr>
<td>Multiplier</td><td>"mult="</td><td>The contract multiplier. </td></tr>
<tr>
<td>Exchange</td><td>"exch="</td><td>The exchange where to get market data from. For equities, 'SMART' means top data from all possible exchanges. </td></tr>
<tr>
<td>PrimaryExchange</td><td>"prim="</td><td>The primary exchange of the contract. It is mostly specified when an contract ambiguity occurs for equity symbols that are listed on multiple exchanges. </td></tr>
<tr>
<td>Currency</td><td>"cur="</td><td>The currency the contract is traded in. </td></tr>
<tr>
<td>LocalSymbol</td><td>"loc="</td><td>The local symbol of the contract. Note the Local Symbol is mostly used for futures and options, and is different from the Symbol. </td></tr>
<tr>
<td>TradingClass</td><td>"tc="</td><td>The trading class of the contract. </td></tr>
<tr>
<td>Combo</td><td>"cmb="</td><td>Combo contract has to be defined using Complex Syntax or Mixed Syntax. The syntax for defining the combo is: <br/>
<br/>
"cmb=&lt;conid1&gt;#&lt;ratio1&gt;#&lt;action1&gt;#&lt;exchange1&gt;;&lt;conid2&gt;#&lt;ratio2&gt;#&lt;action2&gt;#&lt;exchange2&gt;;"<br/>
<br/>
 ,where combo legs are separated by ';' and individual leg parameters are separated by '#'. See more <a class="el" href="rtd_examples.html#rtd_samples_spread">Spread Samples</a> . </td></tr>
<tr>
<td>UnderComp</td><td>"und="</td><td>Delta-Neutral Underlying Component. The syntax for defining the undercomp is: <br/>
<br/>
"und=&lt;&lt;conid&gt;#&lt;delta&gt;#&lt;price&gt;"<br/>
<br/>
, where undercomp parameters are separated by '#'. </td></tr>
<tr class="gray">
<td>MktDataOptions</td><td>"opt="</td><td>Currently not supported. </td></tr>
<tr>
<td>GenericTickList</td><td>"genticks="</td><td>A comma separated Ids of available Generic Tick Types. </td></tr>
<tr>
<td>Topic</td><td>"qt="</td><td>Topic of market data request. </td></tr>
<tr>
<td colspan="3" class="separator"></td></tr>
<tr>
<td>Host</td><td>"host="</td><td>Host IP address. </td></tr>
<tr>
<td>Port</td><td>"port="</td><td>Socket port. </td></tr>
<tr>
<td>ClientId</td><td>"clientid="</td><td>The client ID for socket connection. Note that the client ID is used for identify multiple simultaneous API connections to the same TWS. It was originally designed for API users who would like to manage their strategies separately from different API programs. Since the TWS RTD Server API is currently only supported for real-time market data, there is no need to use multiple client IDs. </td></tr>
</table>
<h1><a class="anchor" id="rtd_complex_additional"></a>
Additional Info</h1>
<p>See also:</p>
<ul>
<li><a class="el" href="rtd_simple_syntax.html">Simple Syntax</a></li>
<li><a class="el" href="rtd_mixed_syntax.html">Mixed Syntax</a></li>
</ul>
<p><br/>
<br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN GCS_SEARCHBOX-->
<style type='text/css'>
	.gsc-control-cse{
		font family: Arial, sans-serif;
		border-color: #000100;
		background-color: #000000;
		width:260px;
		height: 20px;
		padding-top: 6px;
	}
	input.gsc-search-button {
		background-color: #6D1800;
		color: #fff;
		cursor: pointer;
	}
	input.gsc-search-button:hover {
		background-color: #A02200;
	}
	td.gsc-clear-button {
		position: relative;
		right: 85px;
	}
  }
</style>
<!--END GCS_SEARCHBOX-->
</body>
</html>
