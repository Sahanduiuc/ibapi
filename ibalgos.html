<!-- HTML header for doxygen 1.8.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>TWS API v9.72+: IB Algorithms</title>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="https://www.interactivebrokers.com/favicon.ico" rel="shortcut icon">
<script>
$(document).ready(function(){
		var picked=getCookie("picked");
		if (picked != "") {
			if (!$(this).hasClass("active")) {
				var tabNum = $(this).index();
				var nthChild = picked;
				$("ul#tabs li.active").removeClass("active");
				$(this).addClass("active");
				$("ul#tab li.active").removeClass("active");
				$("ul#tab li:nth-child("+nthChild+")").addClass("active");
				$("ul#tabs li:nth-child("+nthChild+")").addClass("active");
				setCookie("picked", nthChild, 1);
			}
		}
		$("ul#tabs li").click(function(e){
			if (!$(this).hasClass("active")) {
			var tabNum = $(this).index();
			var nthChild = tabNum+1;
			$("ul#tabs li.active").removeClass("active");
			$(this).addClass("active");
			$("ul#tab li.active").removeClass("active");
			$("ul#tab li:nth-child("+nthChild+")").addClass("active");
			setCookie("picked", nthChild, 1);
		}
    });
});
function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires="+d.toUTCString();
    document.cookie = cname + "=" + cvalue + "; " + expires;
} 
function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i=0; i<ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1);
        if (c.indexOf(name) == 0) return c.substring(name.length,c.length);
    }
    return "";
} 
function checkCookie() {
    var picked=getCookie("picked");
    if (picked != "") {
        alert("Welcome again " + picked);
    }else{
        //username = prompt("Please enter your name:", "");
        if (picked != "" && picked != null) {
            setCookie("picked", 1, 365);
        }
    }
}
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="ib_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="background-color:black;">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr>
  <td id="projectlogo"><img alt="Logo" src="nav_iblogo.png"/></a></td>
  <td style="padding: 0 0 0 1em;">
   <ul id="tabs"><li class="active">C#</li><li>Java</li><li>VB</li><li>C++</li><li>Python</li></ul>
  </td>
  <td><a href="https://www.interactivebrokers.com/en/index.php?f=customerService&p=email" style="color:#C7C7C7;font-weight:bold;padding: 0 0 0 1em;">Contact us</a></td>
  <!--BEGIN GCS_SEARCHBOX-->
  <td style="position: absolute; right: 0;">
   <div id="google-custom-search" align="right" style="vertical-align: top;">
   <script>
  (function() {
    var cx = '002885114636493240026:q6smajphkxq';
	var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
	</script>
	<gcse:search newWindow="false" enableHistory="true"></gcse:search>
   </div>
   </td>
  <!--END !GCS_SEARCHBOX-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ibalgos.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">IB Algorithms </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="adaptive"></a>
Adaptive Algo</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=19091" target="_blank" class="linkexternal">Adaptive Algo</a> combines IB's Smartrouting capabilities with user-defined priority settings in an effort to achieve further cost efficiency at the point of execution. Using the Adaptive algo leads to better execution prices on average than for regular limit or market orders.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>adaptivePriority </td><td>The 'Priority' selector determines the time taken to scan for better execution prices. The 'Critical' setting scans only briefly, while the 'Patient' scan works more slowly and has a higher chance of achieving a better overall fill for your order. </td><td>Critical &gt; Urgent &gt; Normal &gt; Patient  </td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillAdaptiveParams(baseOrder, <span class="stringliteral">&quot;Normal&quot;</span>);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillAdaptiveParams(Order baseOrder, <span class="keywordtype">string</span> priority)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;Adaptive&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;adaptivePriority&quot;</span>, priority));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillAdaptiveParams(baseOrder, <span class="stringliteral">&quot;Normal&quot;</span>);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillAdaptiveParams(Order baseOrder, String priority) {</div>
<div class="line"></div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;Adaptive&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;adaptivePriority&quot;</span>, priority));</div>
<div class="line"></div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillAdaptiveParams(baseOrder, <span class="stringliteral">&quot;Normal&quot;</span>)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillAdaptiveParams(baseOrder As Order, priority As String)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;Adaptive&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;adaptivePriority&quot;</span>, priority))</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillAdaptiveParams(baseOrder, <span class="stringliteral">&quot;Normal&quot;</span>);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillAdaptiveParams(Order&amp; baseOrder, std::string priority){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;Adaptive&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;adaptivePriority&quot;</span>, priority));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillAdaptiveParams(baseOrder, <span class="stringliteral">&quot;Normal&quot;</span>)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillAdaptiveParams(baseOrder: Order, priority: str):</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        baseOrder.algoStrategy = <span class="stringliteral">&quot;Adaptive&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        baseOrder.algoParams = []</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;adaptivePriority&quot;</span>, priority))</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="arrivalprice"></a>
ArrivalPrice</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=1122" target="_blank" class="linkexternal">Arrival Price</a> algorithmic order type will attempt to achieve, over the course of the order, the bid/ask midpoint at the time the order is submitted. The Arrival Price algo is designed to keep hidden orders that will impact a high percentage of the average daily volume (ADV). The pace of execution is determined by the user-assigned level of risk aversion and the user-defined target percent of average daily volume. How quickly the order is submitted during the day is determined by the level of urgency: the higher the urgency the faster it will execute but will expose it to a greater market impact. Market impact can be lessened by assigning lesser urgency, which is likely to lengthen the duration of the order. The user can set the max percent of ADV from 1 to 50%. The order entry screen allows the user to determine when the order will start and end regardless of whether or not the full amount of the order has been filled. By checking the box marked Allow trading past end time the algo will continue to work past the specified end time in an effort to fill the remaining portion of the order.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>maxPctVol</td><td>Maximum percentage of ADV</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>riskAversion</td><td>Urgency/risk aversion</td><td>Get Done, Aggressive, Neutral, Passive </td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>endTime</td><td>Algorithm ending time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>allowPastEndTime</td><td>Allow trading past end time</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>forceCompletion</td><td>Attempt completion by the end of the day</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>monetaryValue</td><td>Cash Quantity</td><td></td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillArrivalPriceParams(baseOrder, 0.1, <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillArrivalPriceParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol, <span class="keywordtype">string</span> riskAversion, <span class="keywordtype">string</span> startTime, <span class="keywordtype">string</span> endTime, </div>
<div class="line">            <span class="keywordtype">bool</span> forceCompletion, <span class="keywordtype">bool</span> allowPastTime, <span class="keywordtype">double</span> monetaryValue)</div>
<div class="line">        {            </div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;ArrivalPx&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, forceCompletion ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillArrivalPriceParams(baseOrder, 0.1, <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillArrivalPriceParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol, String riskAversion, String startTime, </div>
<div class="line">            String endTime, <span class="keywordtype">boolean</span> forceCompletion, <span class="keywordtype">boolean</span> allowPastTime, <span class="keywordtype">double</span> monetaryValue) {</div>
<div class="line">        </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;ArrivalPx&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, String.valueOf(maxPctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, forceCompletion ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, String.valueOf(monetaryValue)));</div>
<div class="line">                </div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillArrivalPriceParams(baseOrder, 0.1, <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, True, True, 100000)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillArrivalPriceParams(baseOrder As Order, maxPctVol As Double, riskAversion As String, startTime As String, endTime As String,</div>
<div class="line">            forceCompletion As Boolean, allowPastTime As Boolean, monetaryValue As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;ArrivalPx&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, BooleantoString(forceCompletion)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, BooleantoString(allowPastTime)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()))</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillArrivalPriceParams(baseOrder, 0.1, <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillArrivalPriceParams(Order&amp; baseOrder, <span class="keywordtype">double</span> maxPctVol, std::string riskAversion, std::string startTime, std::string endTime, </div>
<div class="line">    <span class="keywordtype">bool</span> forceCompletion, <span class="keywordtype">bool</span> allowPastTime, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;ArrivalPx&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, std::to_string(maxPctVol)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, forceCompletion ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag6(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag7(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, std::to_string(monetaryValue)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag6);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag7);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillArrivalPriceParams(baseOrder, 0.1,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                                   <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">True</span>, <span class="keyword">True</span>, 100000)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillArrivalPriceParams(baseOrder: Order, maxPctVol: float,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                               riskAversion: str, startTime: str, endTime: str,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                               forceCompletion: bool, allowPastTime: bool,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                               monetaryValue: float):</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.algoStrategy = <span class="stringliteral">&quot;ArrivalPx&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.algoParams = []</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol))</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>,</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                                             int(forceCompletion)))</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>,</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                                             int(allowPastTime)))</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue))</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="closepx"></a>
Close Price</h1>
<p>Investors submitting market or limit orders into the closing auction may adversely affect the closing price, especially when the size of the order is large relative to the average close auction volume. In order to help investors attempting to execute towards the end of the trading session we have developed the <a href="https://www.interactivebrokers.com/en/index.php?f=19749" target="_blank" class="linkexternal">Close Price</a> algo Strategy. This algo breaks down large order amounts and determines the timing of order entry so that it will continuously execute in order to minimize slippage. The start and pace of execution are determined by the user who assigns a level of market risk and specifies the target percentage of volume, while the algo considers the prior volatility of the stock.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>maxPctVol</td><td>Maximum percentage of ADV</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>riskAversion</td><td>Urgency/risk aversion</td><td>Get Done, Aggressive, Neutral, Passive </td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>forceCompletion</td><td>Attempt completion by the end of the day</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>monetaryValue</td><td>Cash Quantity</td><td></td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillClosePriceParams(baseOrder, 0.5, <span class="stringliteral">&quot;Neutral&quot;</span>, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillClosePriceParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol, <span class="keywordtype">string</span> riskAversion, <span class="keywordtype">string</span> startTime, </div>
<div class="line">            <span class="keywordtype">bool</span> forceCompletion, <span class="keywordtype">double</span> monetaryValue)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;ClosePx&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, forceCompletion ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillClosePriceParams(baseOrder, 0.5, <span class="stringliteral">&quot;Neutral&quot;</span>, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillClosePriceParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol, String riskAversion, String startTime, </div>
<div class="line">            <span class="keywordtype">boolean</span> forceCompletion, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">            </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;ClosePx&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, String.valueOf(maxPctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, forceCompletion ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, String.valueOf(monetaryValue)));</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillClosePriceParams(baseOrder, 0.5, <span class="stringliteral">&quot;Neutral&quot;</span>, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, True, 100000)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillClosePriceParams(baseOrder As Order, maxPctVol As Double, riskAversion As String, startTime As String, forceCompletion As Boolean, monetaryValue As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;ClosePx&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, BooleantoString(forceCompletion)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()))</div>
<div class="line"></div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillClosePriceParams(baseOrder, 0.5, <span class="stringliteral">&quot;Neutral&quot;</span>, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillClosePriceParams(Order&amp; baseOrder, <span class="keywordtype">double</span> maxPctVol, std::string riskAversion, std::string startTime, <span class="keywordtype">bool</span> forceCompletion, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;ClosePx&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, std::to_string(maxPctVol)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>,riskAversion));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, forceCompletion ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, std::to_string(monetaryValue)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillClosePriceParams(baseOrder, 0.5, <span class="stringliteral">&quot;Neutral&quot;</span>,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                                 <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="keyword">True</span>, 100000)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillClosePriceParams(baseOrder: Order, maxPctVol: float, riskAversion: str,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                             startTime: str, forceCompletion: bool,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                             monetaryValue: float):</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        baseOrder.AlgoStrategy = <span class="stringliteral">&quot;ClosePx&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.AlgoParams = []</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol))</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion))</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, int(forceCompletion)))</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="darkice"></a>
DarkIce</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=3123" target="_blank" class="linkexternal">Dark Ice</a> order type develops the concept of privacy adopted by orders such as Iceberg or Reserve, using a proprietary algorithm to further hide the volume displayed to the market by the order. Clients can determine the timeframe an order remains live and have the option to allow trading past end time in the event it is unfilled by the stated end time. In order to minimize market impact in the event of large orders, users can specify a display size to be shown to the market different from the actual order size. Additionally, the Dark Ice algo randomizes the display size +/- 50% based upon the probability of the price moving favorably. Further, using calculated probabilities, the algo decides whether to place the order at the limit price or one tick lower than the current offer for buy orders and one tick higher than the current bid for sell orders.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>displaySize</td><td>Order size to be displayed</td><td></td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>endTime</td><td>Algorithm ending time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>allowPastEndTime</td><td>Allow trading past end time</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>monetaryValue</td><td>Cash Quantity</td><td></td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillDarkIceParams(baseOrder, 10, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillDarkIceParams(Order baseOrder, <span class="keywordtype">int</span> displaySize, <span class="keywordtype">string</span> startTime, <span class="keywordtype">string</span> endTime, </div>
<div class="line">            <span class="keywordtype">bool</span> allowPastEndTime, <span class="keywordtype">double</span> monetaryValue)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;DarkIce&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;displaySize&quot;</span>, displaySize.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastEndTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillDarkIceParams(baseOrder, 10, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillDarkIceParams(Order baseOrder, <span class="keywordtype">int</span> displaySize, String startTime, String endTime, </div>
<div class="line">            <span class="keywordtype">boolean</span> allowPastEndTime, <span class="keywordtype">double</span> monetaryValue) {</div>
<div class="line">        </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;DarkIce&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;displaySize&quot;</span>, String.valueOf(displaySize)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastEndTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, String.valueOf(monetaryValue)));</div>
<div class="line">        </div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillDarkIceParams(baseOrder, 10, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, True, 100000)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillDarkIceParams(baseOrder As Order, displaySize As Integer, startTime As String, endTime As String,</div>
<div class="line">            allowPastEndTime As Boolean, monetaryValue As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;DarkIce&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;displaySize&quot;</span>, displaySize.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, BooleantoString(allowPastEndTime)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()))</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillDarkIceParams(baseOrder, 10, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillDarkIceParams(Order&amp; baseOrder, <span class="keywordtype">int</span> displaySize, std::string startTime, std::string endTime, <span class="keywordtype">bool</span> allowPastEndTime, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;DarkIce&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;displaySize&quot;</span>, std::to_string(displaySize)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastEndTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, std::to_string(monetaryValue)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillDarkIceParams(baseOrder, 10,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                              <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">True</span>, 100000)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillDarkIceParams(baseOrder: Order, displaySize: int, startTime: str,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                          endTime: str, allowPastEndTime: bool,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                          monetaryValue: float):</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        baseOrder.algoStrategy = <span class="stringliteral">&quot;DarkIce&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.algoParams = []</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;displaySize&quot;</span>, displaySize))</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>,</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                                             int(allowPastEndTime)))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue))</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="ad"></a>
Accumulate/Distribute</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=1223" target="_blank" class="linkexternal">Accumulate/Distribute</a> algo can help you to achieve the best price for a large volume order without being noticed in the market, and can be set up for high frequency trading. By slicing your order into smaller randomly-sized order increments that are released at random time intervals within a user-defined time period, the algo allows the trading of large blocks of stock and other instruments without being detected in the market. The algo allows limit, market, and relative order types. When you put in a Relative Order, you must specify what it is relative to, and here you have a lot of choices. Of course, if it is relative to a fixed value then it is really a Limit Order, but you can make it relative to things like the prevailing bid, the ask, the last price, the VWAP or moving VWAP, the moving average or exponential moving average, your last trade price or the number of shares you have bought so far.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>componentSize</td><td>Quantity of increment</td><td>Cannot exceed initial size </td></tr>
<tr>
<td>timeBetweenOrders</td><td>Time interval in seconds between each order</td><td></td></tr>
<tr>
<td>randomizeTime20</td><td>Randomise time period by +/- 20%</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>randomizeSize55</td><td>Randomise size by +/- 55%</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>giveUp</td><td>Number associated with the clearing</td><td></td></tr>
<tr>
<td>catchUp</td><td>Catch up in time</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>waitForFill</td><td>Wait for current order to fill before submitting next order</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>endTime</td><td>Algorithm ending time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            <span class="comment">// The Time Zone in &quot;startTime&quot; and &quot;endTime&quot; attributes is ignored and always defaulted to GMT</span></div>
<div class="line">            AvailableAlgoParams.FillAccumulateDistributeParams(baseOrder, 10, 60, <span class="keyword">true</span>, <span class="keyword">true</span>, 1, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;20161010-12:00:00 GMT&quot;</span>, <span class="stringliteral">&quot;20161010-16:00:00 GMT&quot;</span>);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillAccumulateDistributeParams(Order baseOrder, <span class="keywordtype">int</span> componentSize, <span class="keywordtype">int</span> timeBetweenOrders, <span class="keywordtype">bool</span> randomizeTime20, <span class="keywordtype">bool</span> randomizeSize55,</div>
<div class="line">            <span class="keywordtype">int</span> giveUp, <span class="keywordtype">bool</span> catchUp, <span class="keywordtype">bool</span> waitForFill, <span class="keywordtype">string</span> startTime, <span class="keywordtype">string</span> endTime)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;AD&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;componentSize&quot;</span>, componentSize.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;timeBetweenOrders&quot;</span>, timeBetweenOrders.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;randomizeTime20&quot;</span>, randomizeTime20 ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;randomizeSize55&quot;</span>, randomizeSize55 ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;giveUp&quot;</span>, giveUp.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;catchUp&quot;</span>, catchUp ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;waitForFill&quot;</span>, waitForFill ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="comment">// The Time Zone in &quot;startTime&quot; and &quot;endTime&quot; attributes is ignored and always defaulted to GMT</span></div>
<div class="line">        AvailableAlgoParams.FillAccumulateDistributeParams(baseOrder, 10, 60, <span class="keyword">true</span>, <span class="keyword">true</span>, 1, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;20161010-12:00:00 GMT&quot;</span>, <span class="stringliteral">&quot;20161010-16:00:00 GMT&quot;</span>);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillAccumulateDistributeParams(Order baseOrder, <span class="keywordtype">int</span> componentSize, <span class="keywordtype">int</span> timeBetweenOrders, <span class="keywordtype">boolean</span> randomizeTime20, <span class="keywordtype">boolean</span> randomizeSize55,</div>
<div class="line">            <span class="keywordtype">int</span> giveUp, <span class="keywordtype">boolean</span> catchUp, <span class="keywordtype">boolean</span> waitForFill, String startTime, String endTime) {</div>
<div class="line">        </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;AD&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;componentSize&quot;</span>, String.valueOf(componentSize)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;timeBetweenOrders&quot;</span>, String.valueOf(timeBetweenOrders)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;randomizeTime20&quot;</span>, randomizeTime20 ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;randomizeSize55&quot;</span>, randomizeSize55 ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;giveUp&quot;</span>, String.valueOf(giveUp)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;catchUp&quot;</span>, catchUp ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;waitForFill&quot;</span>, waitForFill ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        </div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="stringliteral">&#39; The Time Zone in &quot;startTime&quot; and &quot;endTime&quot; attributes is ignored and always defaulted to GMT</span></div>
<div class="line"><span class="stringliteral">        AvailableAlgoParams.FillAccumulateDistributeParams(baseOrder, 10, 60, True, True, 1, True, True, &quot;20161010-12:00:00 GMT&quot;, &quot;20161010-16:00:00 GMT&quot;)</span></div>
<div class="line"><span class="stringliteral">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</span></div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillAccumulateDistributeParams(baseOrder As Order, componentSize As Integer, timeBetweenOrders As Integer, randomizeTime20 As Boolean, randomizeSize55 As Boolean,</div>
<div class="line">            giveUp As Integer, catchUp As Boolean, waitForFill As Boolean, startTime As String, endTime As String)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;AD&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;componentSize&quot;</span>, componentSize.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;timeBetweenOrders&quot;</span>, timeBetweenOrders.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;randomizeTime20&quot;</span>, BooleantoString(randomizeTime20)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;randomizeSize55&quot;</span>, BooleantoString(randomizeSize55)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;giveUp&quot;</span>, giveUp.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;catchUp&quot;</span>, BooleantoString(catchUp)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;waitForFill&quot;</span>, BooleantoString(waitForFill)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="comment">// The Time Zone in &quot;startTime&quot; and &quot;endTime&quot; attributes is ignored and always defaulted to GMT</span></div>
<div class="line">    AvailableAlgoParams::FillAccumulateDistributeParams(baseOrder, 10, 60, <span class="keyword">true</span>, <span class="keyword">true</span>, 1, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="stringliteral">&quot;20161010-12:00:00 GMT&quot;</span>, <span class="stringliteral">&quot;20161010-16:00:00 GMT&quot;</span>);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillAccumulateDistributeParams(Order&amp; baseOrder, <span class="keywordtype">int</span> componentSize, <span class="keywordtype">int</span> timeBetweenOrders, <span class="keywordtype">bool</span> randomizeTime20, <span class="keywordtype">bool</span> randomizeSize55,</div>
<div class="line">    <span class="keywordtype">int</span> giveUp, <span class="keywordtype">bool</span> catchUp, <span class="keywordtype">bool</span> waitForFill, std::string startTime, std::string endTime){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;AD&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;componentSize&quot;</span>, std::to_string(componentSize)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;timeBetweenOrders&quot;</span>,std::to_string(timeBetweenOrders)));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;randomizeTime20&quot;</span>, randomizeTime20 ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;randomizeSize55&quot;</span>, randomizeSize55 ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;giveUp&quot;</span>, std::to_string(giveUp)));</div>
<div class="line">    TagValueSPtr tag6(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;catchUp&quot;</span>, catchUp ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag7(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;waitForFill&quot;</span>, waitForFill ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag8(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag9(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag6);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag7);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag8);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag9);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        <span class="comment"># The Time Zone in &quot;startTime&quot; and &quot;endTime&quot; attributes is ignored and always defaulted to GMT</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        AvailableAlgoParams.FillAccumulateDistributeParams(baseOrder, 10, 60,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                                           <span class="keyword">True</span>, <span class="keyword">True</span>, 1, <span class="keyword">True</span>, <span class="keyword">True</span>,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                                                           <span class="stringliteral">&quot;20161010-12:00:00 GMT&quot;</span>, <span class="stringliteral">&quot;20161010-16:00:00 GMT&quot;</span>)</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillAccumulateDistributeParams(baseOrder: Order, componentSize: int,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                       timeBetweenOrders: int, randomizeTime20: bool, randomizeSize55: bool,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                                       giveUp: int, catchUp: bool, waitForFill: bool, startTime: str,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                                       endTime: str):</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.algoStrategy = <span class="stringliteral">&quot;AD&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.algoParams = []</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;componentSize&quot;</span>, componentSize))</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;timeBetweenOrders&quot;</span>, timeBetweenOrders))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;randomizeTime20&quot;</span>,</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                                             int(randomizeTime20)))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;randomizeSize55&quot;</span>,</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;                                             int(randomizeSize55)))</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;giveUp&quot;</span>, giveUp))</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;catchUp&quot;</span>, int(catchUp)))</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;waitForFill&quot;</span>, int(waitForFill)))</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="pctvol"></a>
Percentage of Volume</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=1123" target="_blank" class="linkexternal">Percent of Volume </a> algo can limit the contribution of orders to overall average daily volume in order to minimize impact. Clients can set a value between 1-50% to control their participation between stated start and end times. Order quantity and volume distribution over the day is determined using the target percent of volume you entered along with continuously updated volume forecasts calculated from TWS market data. In addition, the algo can be set to avoid taking liquidity, which may help avoid liquidity-taker fees and could result in liquidity-adding rebates. By checking the Attempt to never take liquidity box, the algo is discouraged from hitting the bid or lifting the offer if possible. However, this may also result in greater deviations from the benchmark, and in partial fills, since the posted bid/offer may not always get hit as the price moves up/down. IB will use best efforts not to take liquidity when this box is checked, however, there will be times that it cannot be avoided.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>pctVol</td><td>Target Percentage</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>endTime</td><td>Algorithm ending time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>noTakeLiq</td><td>Attempt to never take liquidity</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>monetaryValue</td><td>Cash Quantity</td><td></td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillPctVolParams(baseOrder, 0.5, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillPctVolParams(Order baseOrder, <span class="keywordtype">double</span> pctVol, <span class="keywordtype">string</span> startTime, <span class="keywordtype">string</span> endTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVol&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, pctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillPctVolParams(baseOrder, 0.5, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillPctVolParams(Order baseOrder, <span class="keywordtype">double</span> pctVol, String startTime, String endTime, <span class="keywordtype">boolean</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue) {</div>
<div class="line">        </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;PctVol&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, String.valueOf(pctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, String.valueOf(monetaryValue)));</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillPctVolParams(baseOrder, 0.5, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, True, 100000)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillPctVolParams(baseOrder As Order, pctVol As Double, startTime As String, endTime As String, noTakeLiq As Boolean, monetaryValue As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVol&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, pctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, BooleantoString(noTakeLiq)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()))</div>
<div class="line"></div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillPctVolParams(baseOrder, 0.5, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillPctVolParams(Order&amp; baseOrder, <span class="keywordtype">double</span> pctVol, std::string startTime, std::string endTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;PctVol&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, std::to_string(pctVol)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, std::to_string(monetaryValue)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillPctVolParams(baseOrder, 0.5,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                             <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">True</span>, 100000)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillPctVolParams(baseOrder: Order, pctVol: float, startTime: str,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                         endTime: str, noTakeLiq: bool,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                         monetaryValue: float):</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        baseOrder.algoStrategy = <span class="stringliteral">&quot;PctVol&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.algoParams = []</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, pctVol))</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, int(noTakeLiq)))</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="twap"></a>
TWAP</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=1125" target="_blank" class="linkexternal">TWAP</a> algo aims to achieve the time-weighted average price calculated from the time you submit the order to the time it completes. Incomplete orders at the end of the stated completion time will continue to fill if the box 'allow trading past end time' is checked. Users can set the order to trade only when specified conditions are met. Those user-defined inputs include when the order is marketable, when the midpoint matches the required price, when the same side (buy or sell) matches to make the order marketable or when the last traded price would make the order marketable. For the TWAP algo, the average price calculation is calculated from the order entry time through the close of the market and will only attempt to execute when the criterion is met. The order may not fill throughout its stated duration and so the order is not guaranteed. TWAP is available for all US equities.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>strategyType</td><td>Trade strategy</td><td>Marketable, Matching, Midpoint, Matching Same Side, Matching Last </td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>endTime</td><td>Algorithm ending time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>allowPastEndTime</td><td>Allow trading past end time</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>monetaryValue</td><td>Cash Quantity</td><td></td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillTwapParams(baseOrder, <span class="stringliteral">&quot;Marketable&quot;</span>, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillTwapParams(Order baseOrder, <span class="keywordtype">string</span> strategyType, <span class="keywordtype">string</span> startTime, <span class="keywordtype">string</span> endTime, <span class="keywordtype">bool</span> allowPastEndTime, <span class="keywordtype">double</span> monetaryValue)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;Twap&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;strategyType&quot;</span>, strategyType));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastEndTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillTwapParams(baseOrder, <span class="stringliteral">&quot;Marketable&quot;</span>, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillTwapParams(Order baseOrder, String strategyType, String startTime, String endTime, </div>
<div class="line">            <span class="keywordtype">boolean</span> allowPastEndTime, <span class="keywordtype">double</span> monetaryValue) {</div>
<div class="line">        </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;Twap&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;strategyType&quot;</span>, strategyType));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastEndTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, String.valueOf(monetaryValue)));</div>
<div class="line">        </div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillTwapParams(baseOrder, <span class="stringliteral">&quot;Marketable&quot;</span>, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, True, 100000)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillTwapParams(baseOrder As Order, strategyType As String, startTime As String, endTime As String,</div>
<div class="line">            allowPastEndTime As Boolean, monetaryValue As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;Twap&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;strategyType&quot;</span>, strategyType))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, BooleantoString(allowPastEndTime)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()))</div>
<div class="line"></div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillTwapParams(baseOrder, <span class="stringliteral">&quot;Marketable&quot;</span>, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillTwapParams(Order&amp; baseOrder, std::string strategyType, std::string startTime, std::string endTime, <span class="keywordtype">bool</span> allowPastEndTime, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;Twap&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;strategyType&quot;</span>, strategyType));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastEndTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, std::to_string(monetaryValue)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillTwapParams(baseOrder, <span class="stringliteral">&quot;Marketable&quot;</span>,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                           <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">True</span>, 100000)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillTwapParams(baseOrder: Order, strategyType: str, startTime: str,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                       endTime: str, allowPastEndTime: bool,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                       monetaryValue: float):</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        baseOrder.algoStrategy = <span class="stringliteral">&quot;Twap&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.algoParams = []</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;strategyType&quot;</span>, strategyType))</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>,</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                                             int(allowPastEndTime)))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue))</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="pctvolpx"></a>
Price Variant Percentage of Volume Strategy</h1>
<p><a href="https://www.interactivebrokers.com/en/index.php?f=14369#collapse03" target="_blank" class="linkexternal">Price Variant Percentage of Volume Strategy</a> - This algo allows you to participate in volume at a user-defined rate that varies over time depending on the market price of the security. This algo allows you to buy more aggressively when the price is low and be more passive as the price increases, and just the opposite for sell orders. The order quantity and volume distribution over the time during which the order is active is determined using the target percent of volume you entered along with continuously updated volume forecasts calculated from TWS market data.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>pctVol</td><td>Target Percentage</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>deltaPctVol</td><td>Target Percentage Change Rate</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>minPctVol4Px</td><td>Minimum Target Percentage</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>maxPctVol4Px</td><td>Maximum Target Percentage</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>endTime</td><td>Algorithm ending time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>noTakeLiq</td><td>Attempt to never take liquidity</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>monetaryValue</td><td>Cash Quantity</td><td></td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillPriceVariantPctVolParams(baseOrder, 0.1, 0.05, 0.01, 0.2, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillPriceVariantPctVolParams(Order baseOrder, <span class="keywordtype">double</span> pctVol, <span class="keywordtype">double</span> deltaPctVol, <span class="keywordtype">double</span> minPctVol4Px, </div>
<div class="line">            <span class="keywordtype">double</span> maxPctVol4Px, String startTime, String endTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVolPx&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, pctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;deltaPctVol&quot;</span>, deltaPctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;minPctVol4Px&quot;</span>, minPctVol4Px.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol4Px&quot;</span>, maxPctVol4Px.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillPriceVariantPctVolParams(baseOrder, 0.1, 0.05, 0.01, 0.2, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillPriceVariantPctVolParams(Order baseOrder, <span class="keywordtype">double</span> pctVol, <span class="keywordtype">double</span> deltaPctVol, <span class="keywordtype">double</span> minPctVol4Px, </div>
<div class="line">            <span class="keywordtype">double</span> maxPctVol4Px, String startTime, String endTime, <span class="keywordtype">boolean</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">            </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;PctVolPx&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, String.valueOf(pctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;deltaPctVol&quot;</span>, String.valueOf(deltaPctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;minPctVol4Px&quot;</span>, String.valueOf(minPctVol4Px)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol4Px&quot;</span>, String.valueOf(maxPctVol4Px)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, String.valueOf(monetaryValue)));</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillPriceVariantPctVolParams(baseOrder, 0.1, 0.05, 0.01, 0.2, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, True, 100000)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillPriceVariantPctVolParams(baseOrder As Order, pctVol As Double, deltaPctVol As Double, minPctVol4Px As Double,</div>
<div class="line">            maxPctVol4Px As Double, startTime As String, endTime As String, noTakeLiq As Boolean, monetaryValue As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVolPx&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, pctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;deltaPctVol&quot;</span>, deltaPctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;minPctVol4Px&quot;</span>, minPctVol4Px.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;maxPctVol4Px&quot;</span>, maxPctVol4Px.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, BooleantoString(noTakeLiq)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()))</div>
<div class="line"></div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillPriceVariantPctVolParams(baseOrder, 0.1, 0.05, 0.01, 0.2, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillPriceVariantPctVolParams(Order baseOrder, <span class="keywordtype">double</span> pctVol, <span class="keywordtype">double</span> deltaPctVol, <span class="keywordtype">double</span> minPctVol4Px, </div>
<div class="line">                                                       <span class="keywordtype">double</span> maxPctVol4Px, std::string startTime, std::string endTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;PctVolPx&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, std::to_string(pctVol)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;deltaPctVol&quot;</span>, std::to_string(deltaPctVol)));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;minPctVol4Px&quot;</span>, std::to_string(minPctVol4Px)));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol4Px&quot;</span>, std::to_string(maxPctVol4Px)));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag6(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">    TagValueSPtr tag7(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag8(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, std::to_string(monetaryValue)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag6);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag7);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag8);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillPriceVariantPctVolParams(baseOrder,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                                         0.1, 0.05, 0.01, 0.2, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">True</span>,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                                         100000)</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillPriceVariantPctVolParams(baseOrder: Order, pctVol: float,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                     deltaPctVol: float, minPctVol4Px: float,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                                     maxPctVol4Px: float, startTime: str,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                                     endTime: str, noTakeLiq: bool,</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;                                     monetaryValue: float):</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVolPx&quot;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.AlgoParams = []</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;pctVol&quot;</span>, pctVol))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;deltaPctVol&quot;</span>, deltaPctVol))</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;minPctVol4Px&quot;</span>, minPctVol4Px))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;maxPctVol4Px&quot;</span>, maxPctVol4Px))</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, int(noTakeLiq)))</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue))</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="pctvolsz"></a>
Size Variant Percentage of Volume Strategy</h1>
<p><a href="https://www.interactivebrokers.com/en/index.php?f=14369#collapse02" target="_blank" class="linkexternal">Size Variant Percentage of Volume Strategy</a> - This algo allows you to participate in volume at a user-defined rate that varies over time depending on the remaining size of the order. Define the target percent rate at the start time (Initial Participation Rate) and at the end time (Terminal Participation Rate), and the algo calculates the participation rate over time between the two based on the remaining order size. This allows the order to be more aggressive initially and less aggressive toward the end, or vice versa.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>startPctVol</td><td>Initial Target Percentage</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>endPctVol</td><td>Terminal Target Percentage</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>endTime</td><td>Algorithm ending time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>noTakeLiq</td><td>Attempt to never take liquidity</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>monetaryValue</td><td>Cash Quantity</td><td></td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillSizeVariantPctVolParams(baseOrder, 0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillSizeVariantPctVolParams(Order baseOrder, <span class="keywordtype">double</span> startPctVol, <span class="keywordtype">double</span> endPctVol, </div>
<div class="line">            String startTime, String endTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVolSz&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, startPctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, endPctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillSizeVariantPctVolParams(baseOrder, 0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillSizeVariantPctVolParams(Order baseOrder, <span class="keywordtype">double</span> startPctVol, <span class="keywordtype">double</span> endPctVol, </div>
<div class="line">            String startTime, String endTime, <span class="keywordtype">boolean</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">            </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;PctVolSz&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, String.valueOf(startPctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, String.valueOf(endPctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, String.valueOf(monetaryValue)));</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillSizeVariantPctVolParams(baseOrder, 0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, True, 100000)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillSizeVariantPctVolParams(baseOrder As Order, startPctVol As Double, endPctVol As Double,</div>
<div class="line">            startTime As String, endTime As String, noTakeLiq As Boolean, monetaryValue As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVolSz&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, startPctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, endPctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, BooleantoString(noTakeLiq)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()))</div>
<div class="line"></div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillSizeVariantPctVolParams(baseOrder, 0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillSizeVariantPctVolParams(Order baseOrder, <span class="keywordtype">double</span> startPctVol, <span class="keywordtype">double</span> endPctVol, </div>
<div class="line">                                std::string startTime, std::string endTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;PctVolSz&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, std::to_string(startPctVol)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, std::to_string(endPctVol)));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag6(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, std::to_string(monetaryValue)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag6);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillSizeVariantPctVolParams(baseOrder,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                                        0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">True</span>, 100000)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillSizeVariantPctVolParams(baseOrder: Order, startPctVol: float,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                    endPctVol: float, startTime: str,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                                    endTime: str, noTakeLiq: bool,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                                    monetaryValue: float):</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVolSz&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.AlgoParams = []</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, startPctVol))</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, endPctVol))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, int(noTakeLiq)))</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue))</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="pctvoltm"></a>
Time Variant Percentage of Volume Strategy</h1>
<p><a href="https://www.interactivebrokers.com/en/index.php?f=14369#collapse01" target="_blank" class="linkexternal">Time Variant Percentage of Volume Strategy</a> - This algo allows you to participate in volume at a user-defined rate that varies with time. Define the target percent rate at the start time and at the end time, and the algo calculates the participation rate over time between the two. This allows the order to be more aggressive initially and less aggressive toward the end, or vice versa.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>startPctVol</td><td>Initial Target Percentage</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>endPctVol</td><td>Terminal Target Percentage</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>endTime</td><td>Algorithm ending time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>noTakeLiq</td><td>Attempt to never take liquidity</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>monetaryValue</td><td>Cash Quantity</td><td></td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillTimeVariantPctVolParams(baseOrder, 0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillTimeVariantPctVolParams(Order baseOrder, <span class="keywordtype">double</span> startPctVol, <span class="keywordtype">double</span> endPctVol,</div>
<div class="line">            String startTime, String endTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVolTm&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, startPctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, endPctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillTimeVariantPctVolParams(baseOrder, 0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillTimeVariantPctVolParams(Order baseOrder, <span class="keywordtype">double</span> startPctVol, <span class="keywordtype">double</span> endPctVol, </div>
<div class="line">            String startTime, String endTime, <span class="keywordtype">boolean</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">            </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;PctVolTm&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, String.valueOf(startPctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, String.valueOf(endPctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, String.valueOf(monetaryValue)));</div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillTimeVariantPctVolParams(baseOrder, 0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, True, 100000)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillTimeVariantPctVolParams(baseOrder As Order, startPctVol As Double, endPctVol As Double,</div>
<div class="line">            startTime As String, endTime As String, noTakeLiq As Boolean, monetaryValue As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVolTm&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, startPctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, endPctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, BooleantoString(noTakeLiq)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()))</div>
<div class="line"></div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillTimeVariantPctVolParams(baseOrder, 0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillTimeVariantPctVolParams(Order baseOrder, <span class="keywordtype">double</span> startPctVol, <span class="keywordtype">double</span> endPctVol, std::string startTime, </div>
<div class="line">                                 std::string endTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;PctVolTm&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, std::to_string(startPctVol)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, std::to_string(endPctVol)));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag6(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, std::to_string(monetaryValue)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag6);</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillTimeVariantPctVolParams(baseOrder,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                                        0.2, 0.4, <span class="stringliteral">&quot;12:00:00 EST&quot;</span>, <span class="stringliteral">&quot;14:00:00 EST&quot;</span>, <span class="keyword">True</span>, 100000)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillTimeVariantPctVolParams(baseOrder: Order, startPctVol: float,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                    endPctVol: float, startTime: str,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                                    endTime: str, noTakeLiq: bool,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;                                    monetaryValue: float):</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.AlgoStrategy = <span class="stringliteral">&quot;PctVolTm&quot;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.AlgoParams = []</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;startPctVol&quot;</span>, startPctVol))</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;endPctVol&quot;</span>, endPctVol))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, int(noTakeLiq)))</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        baseOrder.AlgoParams.append(TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue))</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="vwap"></a>
VWAP</h1>
<p>IB's best-efforts <a href="https://www.interactivebrokers.com/en/index.php?f=1124" target="_blank" class="linkexternal">VWAP</a> algo seeks to achieve the Volume-Weighted Average price (VWAP), calculated from the time you submit the order to the close of the market.</p>
<p>If you require a guaranteed VWAP, please refer to IB's <a href="https://www.interactivebrokers.com/en/index.php?f=603" target="_blank" class="linkexternal">Guaranteed VWAP</a> order type.</p>
<p>Best-efforts VWAP algo is a lower-cost alternative to the Guaranteed VWAP that enables the user to attempt never to take liquidity while also trading past the end time. Because the order may not be filled on the bid or at the ask prices, there is a trade-off with this algo. The order may not fully fill if the user is attempting to avoid liquidity-taking fees and/or maximize liquidity-adding rebates, and may miss the benchmark by asking to stay on the bid or ask. The user can determine the maximum percentage of average daily volume (up to 50%) his order will comprise. The system will generate the VWAP from the time the order is entered through the close of trading, and the order can be limited to trading over a pre-determined period. The user can request the order to continue beyond its stated end time if unfilled at the end of the stated period. The best-efforts VWAP algo is available for all US equities.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>maxPctVol</td><td>Maximum percentage of average daily volume</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>startTime</td><td>Algorithm starting time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>endTime</td><td>Algorithm ending time</td><td>hh:mm:ss TMZ or YYYYMMDD-hh:mm:ss TMZ </td></tr>
<tr>
<td>allowPastEndTime</td><td>Allow trading past end time</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>noTakeLiq</td><td>Attempt to never take liquidity</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>speedUp</td><td>Compensate for the decreased fill rate due to presence of limit price</td><td>1 (true) or 0 (false) </td></tr>
<tr>
<td>monetaryValue</td><td>Cash Quantity</td><td></td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillVwapParams(baseOrder, 0.2, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillVwapParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol, <span class="keywordtype">string</span> startTime, <span class="keywordtype">string</span> endTime, </div>
<div class="line">            <span class="keywordtype">bool</span> allowPastEndTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">bool</span> speedUp, <span class="keywordtype">double</span> monetaryValue)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;Vwap&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastEndTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;speedUp&quot;</span>, speedUp ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillVwapParams(baseOrder, 0.2, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">true</span>, 100000);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillVwapParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol, String startTime, String endTime, </div>
<div class="line">            <span class="keywordtype">boolean</span> allowPastEndTime, <span class="keywordtype">boolean</span> noTakeLiq, <span class="keywordtype">boolean</span> speedUp, <span class="keywordtype">double</span> monetaryValue) {</div>
<div class="line">        </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;Vwap&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, String.valueOf(maxPctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastEndTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;speedUp&quot;</span>, speedUp ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, String.valueOf(monetaryValue)));</div>
<div class="line">        </div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillVwapParams(baseOrder, 0.2, <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, True, True, True, 100000)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillVwapParams(baseOrder As Order, maxPctVol As Double, startTime As String, endTime As String,</div>
<div class="line">            allowPastEndTime As Boolean, noTakeLiq As Boolean, speedUp As Boolean, monetaryValue As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;Vwap&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, BooleantoString(allowPastEndTime)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, BooleantoString(noTakeLiq)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;speedUp&quot;</span>, BooleantoString(speedUp)))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue.ToString()))</div>
<div class="line"></div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillBalanceImpactRiskParams(baseOrder, 0.1, <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillVwapParams(Order&amp; baseOrder, <span class="keywordtype">double</span> maxPctVol, std::string startTime, std::string endTime, <span class="keywordtype">bool</span> allowPastEndTime, <span class="keywordtype">bool</span> noTakeLiq, <span class="keywordtype">bool</span> speedUp, <span class="keywordtype">double</span> monetaryValue){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;Vwap&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, std::to_string(maxPctVol)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime));</div>
<div class="line">    TagValueSPtr tag4(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>, allowPastEndTime ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag5(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, noTakeLiq ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag6(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;speedUp&quot;</span>, speedUp ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    TagValueSPtr tag7(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, std::to_string(monetaryValue)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag4);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag5);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag6);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag7);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillVwapParams(baseOrder, 0.2,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                           <span class="stringliteral">&quot;09:00:00 CET&quot;</span>, <span class="stringliteral">&quot;16:00:00 CET&quot;</span>, <span class="keyword">True</span>, <span class="keyword">True</span>, 100000)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USStockAtSmart(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillVwapParams(baseOrder: Order, maxPctVol: float, startTime: str,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                       endTime: str, allowPastEndTime: bool, noTakeLiq: bool,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;                       monetaryValue: float):</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        baseOrder.algoStrategy = <span class="stringliteral">&quot;Vwap&quot;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.algoParams = []</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol))</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;startTime&quot;</span>, startTime))</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;endTime&quot;</span>, endTime))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;allowPastEndTime&quot;</span>,</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                                             int(allowPastEndTime)))</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;noTakeLiq&quot;</span>, int(noTakeLiq)))</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;monetaryValue&quot;</span>, monetaryValue))</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="balanceimpact"></a>
Balance Impact Risk</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=1120" target="_blank" class="linkexternal">Balance Impact Risk</a> balances the market impact of trading the option with the risk of price change over the time horizon of the order. This strategy considers the user-assigned level of risk aversion to define the pace of the execution, along with the user-defined target percent of volume.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>maxPctVol</td><td>Maximum percentage of average daily volume</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
<tr>
<td>riskAversion</td><td>Urgency/risk aversion</td><td>Get Done, Aggressive, Neutral, Passive </td></tr>
<tr>
<td>forceCompletion</td><td>Attempt completion by the end of the day</td><td>1 (true) or 0 (false) </td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillBalanceImpactRiskParams(baseOrder, 0.1, <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USOptionContract(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillBalanceImpactRiskParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol, <span class="keywordtype">string</span> riskAversion, <span class="keywordtype">bool</span> forceCompletion)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;BalanceImpactRisk&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion));</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, forceCompletion ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillBalanceImpactRiskParams(baseOrder, 0.1, <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USOptionContract(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillBalanceImpactRiskParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol, String riskAversion, <span class="keywordtype">boolean</span> forceCompletion) {</div>
<div class="line">        </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;BalanceImpactRisk&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, String.valueOf(maxPctVol)));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion));</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, forceCompletion ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">        </div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillBalanceImpactRiskParams(baseOrder, 0.1, <span class="stringliteral">&quot;Aggressive&quot;</span>, True)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USOptionContract(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillBalanceImpactRiskParams(baseOrder As Order, maxPctVol As Double, riskAversion As String, forceCompletion As Boolean)</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;BalanceImpactRisk&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion))</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, BooleantoString(forceCompletion)))</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillBalanceImpactRiskParams(baseOrder, 0.1, <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillBalanceImpactRiskParams(Order&amp; baseOrder, <span class="keywordtype">double</span> maxPctVol, std::string riskAversion, <span class="keywordtype">bool</span> forceCompletion){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;BalanceImpactRisk&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, std::to_string(maxPctVol)));</div>
<div class="line">    TagValueSPtr tag2(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion));</div>
<div class="line">    TagValueSPtr tag3(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>, forceCompletion ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag2);</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag3);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillBalanceImpactRiskParams(baseOrder, 0.1,</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;                                                        <span class="stringliteral">&quot;Aggressive&quot;</span>, <span class="keyword">True</span>)</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USOptionContract(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillBalanceImpactRiskParams(baseOrder: Order, maxPctVol: float,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                    riskAversion: str, forceCompletion: bool):</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        baseOrder.algoStrategy = <span class="stringliteral">&quot;BalanceImpactRisk&quot;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        baseOrder.algoParams = []</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol))</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;riskAversion&quot;</span>, riskAversion))</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;forceCompletion&quot;</span>,</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                                             int(forceCompletion)))</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<h1><a class="anchor" id="minimpact"></a>
Minimise Impact</h1>
<p>The <a href="https://www.interactivebrokers.com/en/index.php?f=1121" target="_blank" class="linkexternal">Minimise Impact</a> algo minimises market impact by slicing the order over time to achieve a market average without going over the given maximum percentage value.</p>
<table class="doxtable">
<tr>
<th>Parameter</th><th>Description</th><th>Values </th></tr>
<tr>
<td>maxPctVol</td><td>Maximum percentage of average daily volume</td><td>0.1 (10%) - 0.5 (50%) </td></tr>
</table>
<p><br/>
</p>
<ul id="tab">
<li class="active">
<div class="fragment"><div class="line">            Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">            AvailableAlgoParams.FillMinImpactParams(baseOrder, 0.3);</div>
<div class="line">            client.placeOrder(nextOrderId++, ContractSamples.USOptionContract(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillMinImpactParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol)</div>
<div class="line">        {</div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;MinImpact&quot;</span>;</div>
<div class="line">            baseOrder.AlgoParams = <span class="keyword">new</span> List&lt;TagValue&gt;();</div>
<div class="line">            baseOrder.AlgoParams.Add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()));</div>
<div class="line">        }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Order baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillMinImpactParams(baseOrder, 0.3);</div>
<div class="line">        client.placeOrder(nextOrderId++, ContractSamples.USOptionContract(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> FillMinImpactParams(Order baseOrder, <span class="keywordtype">double</span> maxPctVol) {</div>
<div class="line">        </div>
<div class="line">        baseOrder.algoStrategy(<span class="stringliteral">&quot;BalanceImpactRisk&quot;</span>);</div>
<div class="line">        baseOrder.algoParams(<span class="keyword">new</span> ArrayList&lt;&gt;());</div>
<div class="line">        baseOrder.algoParams().add(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, String.valueOf(maxPctVol)));</div>
<div class="line">        </div>
<div class="line">    }</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">        Dim baseOrder As Order = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        AvailableAlgoParams.FillMinImpactParams(baseOrder, 0.3)</div>
<div class="line">        client.placeOrder(increment(nextOrderId), ContractSamples.USOptionContract(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">        Public Shared Sub FillMinImpactParams(baseOrder As Order, maxPctVol As Double)</div>
<div class="line"></div>
<div class="line">            baseOrder.AlgoStrategy = <span class="stringliteral">&quot;MinImpact&quot;</span></div>
<div class="line">            baseOrder.AlgoParams = New List(Of TagValue)</div>
<div class="line">            baseOrder.AlgoParams.Add(New TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol.ToString()))</div>
<div class="line">        End Sub</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line">    Order baseOrder = OrderSamples::LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line">    AvailableAlgoParams::FillMinImpactParams(baseOrder, 0.3);</div>
<div class="line">    m_pClient-&gt;placeOrder(m_orderId++, ContractSamples::USStockAtSmart(), baseOrder);</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><span class="keywordtype">void</span> AvailableAlgoParams::FillMinImpactParams(Order&amp; baseOrder, <span class="keywordtype">double</span> maxPctVol){</div>
<div class="line">    baseOrder.algoStrategy = <span class="stringliteral">&quot;MinImpact&quot;</span>;</div>
<div class="line">    baseOrder.algoParams.reset(<span class="keyword">new</span> TagValueList());</div>
<div class="line">    TagValueSPtr tag1(<span class="keyword">new</span> TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, std::to_string(maxPctVol)));</div>
<div class="line">    baseOrder.algoParams-&gt;push_back(tag1);</div>
<div class="line">}</div>
</div><!-- fragment -->  </li>
<li>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        baseOrder = OrderSamples.LimitOrder(<span class="stringliteral">&quot;BUY&quot;</span>, 1000, 1)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;        AvailableAlgoParams.FillMinImpactParams(baseOrder, 0.3)</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;        self.placeOrder(self.nextOrderId(), ContractSamples.USOptionContract(), baseOrder)</div>
</div><!-- fragment --> ... <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;    @staticmethod</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="keyword">def </span>FillMinImpactParams(baseOrder: Order, maxPctVol: float):</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;        baseOrder.algoStrategy = <span class="stringliteral">&quot;MinImpact&quot;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;        baseOrder.algoParams = []</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;        baseOrder.algoParams.append(TagValue(<span class="stringliteral">&quot;maxPctVol&quot;</span>, maxPctVol))</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
</div><!-- fragment -->  </li>
</ul>
<p><br/>
<br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">This website uses cookies. By navigating through it you agree to the use of cookies. Copyright Interactive Brokers 2016 </li>
  </ul>
</div>
<!--BEGIN GCS_SEARCHBOX-->
<style type='text/css'>
	.gsc-control-cse{
		font family: Arial, sans-serif;
		border-color: #000100;
		background-color: #000000;
		width:250px;
		height: 20px;
		padding-top: 6px;
	}
	input.gsc-search-button {
		background-color: #6D1800;
		color: #fff;
		cursor: pointer;
	}
	input.gsc-search-button:hover {
		background-color: #A02200;
	}
	td.gsc-clear-button {
		position: relative;
		right: 85px;
	}
  }
</style>
<!--END GCS_SEARCHBOX-->
</body>
</html>
